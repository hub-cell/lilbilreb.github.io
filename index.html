!function(jQuery){jQuery.fn.isset=function(){return this.length>0},jQuery.fn.center=function(){return this.css({top:"50%",left:"50%",margin:"-"+Math.ceil(this.outerHeight()/2)+"px 0 0 -"+Math.ceil(this.outerWidth()/2)+"px"})},jQuery.fn.redraw=function(){return this.each(function(){var t=document.createTextNode(" ");this.appendChild(t),t.parentNode.removeChild(t)})},jQuery.create=function(t,e,i,n){if(t&&(e=e?jQuery(e)[0]:document.body)){var s=document.createElement(t);if(i)for(var r in i)jQuery.isFunction(i[r])&&(i[r]=i[r]()),s.setAttribute(r,i[r]);if(n)for(var a in n)s["on"+a]=n[a];if(e.appendChild(s))return s}},jQuery.timeout=function(t,e,i,n,s){if(i){var r=function(){i.apply(t,n)};return window["set"+(s?"Interval":"Timeout")](r,e)}},jQuery.interval=function(t,e,i,n){return jQuery.timeout(t,e,i,n,!0)},jQuery.fn.lazy=function(){var t,e;return arguments.length>0&&(2==arguments.length?(t=arguments[0],e=arguments[1]):jQuery.isFunction(arguments[0])?e=arguments[0]:t=arguments[0]),t=t||this[0].parentNode||this,this.find("img.lazy[data-src]").each(function(){if(jQuery(this).parent().viewable(t)){var i=new Image,n=jQuery(this).data("src"),s=this;i.onload=function(){jQuery(s).attr("src",n).removeAttr("data-src"),e&&e(n)},i.src=n}})},jQuery.fn.date=function(t){if(t)return Dating.parse(this.data(t))},jQuery.fn.focusin=function(t,e){return Focus.set(this,t,e),this},jQuery.fn.focusable=function(t){return this.hasClass("focusable")&&Navi.contains(this,t)},jQuery.fn.viewable=function(t){var e=jQuery(t||window)[0].getBoundingClientRect(),i=this[0].getBoundingClientRect();return i.top>=e.top&&i.bottom<=e.bottom&&i.left>=e.left&&i.right<=e.right},jQuery.fn.clickable=function(){return this.closest(".clickable").isset()},jQuery.fn.scrollable=function(){return this.find(".scrollable").each(function(){var t,e,i=0,n=0,s=jQuery(this).swipe({swiping:function(r,a,o,u,c,h,l){if(1==h){var $=s.parent().height(),d=$-s.height(),f=Math.ceil(s.height()/s.children().length),x=u/c,u=l[0].end.y-l[0].start.y,p=function(){s.trigger(jQuery.Event("scrolling",{phase:a,direction:o,distance:u,duration:c,fingers:h,data:l,overage:n}))};f>0&&(d<=0?"start"==a?(i=n=0,t=parseInt(s.stop(!0).css("top"))||0):"move"==a?((e=t+(i=u*Math.max(1,x)))>0?(0==t&&(n=e),e=0):e<d?(t==d&&(n=e-d),e=d):n=0,s.stop(!0).animate({top:e},t==e?0:100*x,"linear",p)):i&&s.animate({top:e=Math[Math.abs(i)>$?u<0?"floor":"ceil":"round"](e/f)*f},t==e?0:100,"linear",p):(n=u,p())),r.stopPropagation()}},hold:function(t){var e=jQuery(t.target).closest(".focusable");e.focusable()&&e.focusin()}})}),this},jQuery.fn.input=function(){var t=this.data("input");if(t)return t;var e=this,i=e.find(".value");return e.data("input",t={init:function(){return this.value.init(),this},name:function(){return e.data("name")},layout:function(){return e.data("layout")},protect:function(){return e.data("protect")},secure:function(){return e.data("secure")||"visible"},mask:function(){return e.data("mask")},value:{init:function(){var t=this.get();i.data("plain",t),this.set(t,!0,!1)},plain:function(){return i.data("plain")},focus:function(){var t=this.plain();t.length&&this.set(t,!1,!0)},get:function(){return i.text()},set:function(e,n,s){var r=i.data("slice"),a=t.mask();r&&((r=r.toString().split(","))[1]>r[0]?e=e.slice(r[0],r[1]):e.length>Math.abs(r[0])&&(e=e.slice(r[0]))),i.data("plain",e||"");try{(a=a.toString()).length&&(e=e.replace(/./g,a))}catch(o){}this.protection.set(e,n,s)},protection:{protecting:!1,reset:function(){this.protecting&&(clearTimeout(this.protecting),this.protecting=!1)},set:function(e,n,s){if(this.reset(),"secure"==t.protect()){var r="hidden"==t.secure();(r?n||s:n&&!s)?i.text(e.replace(/./g,"*")):i.text(e),r&&this.defend(n?0:1e3)}else i.text(e)},defend:function(e,n){this.reset(),"secure"==t.protect()&&(n||"hidden"==t.secure())&&(this.protecting=jQuery.timeout(this,e||0,function(){i.text(t.value.plain().replace(/./g,"*")),this.reset()}))}},blur:function(){this.protection.defend(0,!0)}},focus:function(){return this.value.focus(),Keyboard.focus(this)},blur:function(){this.value.blur()},serialize:function(t){var e={name:this.name(),value:this.value.plain().replace(/\u00A0/g," ")};return t?t(e.name,e.value):e}}),t.init()};var b,a,a,a,b,a,b,a,a,a,a,_0x5e6184,b,a,a,a,a,b,a,a,a,a,b,c,a,_0x137552,_0x314b40,_0x5715cf,_0x12bea0,Module,Plugins,Body,Sidebar,Preload,Logo,Header,Clock,a,Menu,About,Main=(b=!0,a={init:function(){return this.focus().destroy()},focus:function(){return jQuery(window).focus(),this},bind:function(){return jQuery(document).on("visibilitychange",function(){document.hidden?a.status(!1):a.status(!0)}).on("key",function(t,e){if("exit"===e)return a.exit(),!1}).swipe({fingers:"all",threshold:100,pinchThreshold:100,longTapThreshold:1e3,fallbackToMouseEvents:!1}),Ajaxify.filter(this,"json",function(t){if(t.reload)return this.reload(),!1}),this.unload(this,this.destroy)},ready:function(t){t&&(jQuery.isReady?t():this.load(!1,t))},status:function(t){return(!0===t||!1===t)&&b!==t&&((b=t)?this.trigger("resume"):this.trigger("suspend")),b},destroy:function(){return this.off("destroy").empty()},empty:function(){return jQuery(document.body).empty(),jQuery("iframe, object, meta, link").remove(),this},load:function(t,e){return this.on("load",t,!0,e)},unload:function(t,e){return this.on("onbeforeunload"in window?"beforeunload":"unload",t,!0,e)},on:function(t,e,i,n){if(t&&(t=t.split(" "))){var s;for(var r in n&&(s=function(){n.apply(e,arguments)}),t)t[r]=(i?"":"on")+t[r],i?s?jQuery(window).bind(t[r],s):jQuery(window).unbind(t[r]):window[t[r]]=s}return this},off:function(t){return t&&this.trigger(t),jQuery(document).off(),jQuery(window).off(),this},trigger:function(t,e){return t&&jQuery(window).trigger(t,e),this},js:{load:function(t,e,i){var n=t?t.length:0;if(n){var s=0;for(var r in t)jQuery.create("script","head",{type:"text/javascript",src:t[r]},{load:function(){++s==n&&e&&e.call(i)}})}else e&&e.call(i)}},css:{load:function(t){if(t)for(var e in t)jQuery.create("link","head",{type:"text/css",rel:"stylesheet",href:t[e]+"?"+Math.random()})}},meta:{set:function(t){if(t)for(var e in t)jQuery.create("meta","head",t[e])}},objects:{append:function(t){if(t)for(var e in t)t[e].id=t[e].id||e,t[e].style=t[e].style||"position: absolute; visibility: hidden; display: block; background: none; width: 0; height: 0;",jQuery.create("object",!1,t[e])}},reload:function(){location.reload(!0)},back:function(){var t=Proto.menu({title:["auth","confirm exit"],items:{yes:{label:["auth","Yes"],focused:!0,enter:function(){t.close(),Platform.call("back")}},no:{label:["auth","No"],enter:function(){t.close()}}},legend:{enter:{key:"enter",label:["navigation","enter"]},ud:{key:"down",icon:"ud",label:["navigation","ud"]},back:{key:"back",label:["navigation","back"]}},back:function(){t.close()},on:function(){this.container.find(".list").addClass("navigable").attr("data-plane","vertical"),this.container.off("key:enter.dialog").on("key:enter.dialog",".item",function(){var e=jQuery(this).data("item"),i=t.items[e];i&&i.enter&&i.enter()}),this.container.off("key:back.dialog").on("key:back.dialog",function(){t.close()})}});t.open()},exit:function(){Platform.call("exit")}}),History={ready:!1,enabled:!1,enable:function(t){return this.enabled=!!t,this},supported:function(){return window.history&&history.pushState},push:function(){if(this.enabled&&this.ready){var t={position:history.length};return history.pushState(t,""),!0}return!1},bind:function(){return this.supported()&&Main.on("popstate",this,!1,function(){this.enabled&&this.push()&&Navi.trigger("back")}).load(this,function(){this.enabled&&(this.ready=!0,this.push())}),this}},Ajaxify=a={rules:{},init:function(){return jQuery.ajaxSetup({crossDomain:!1,beforeSend:function(){if(!Network.status())return!1},type:"POST",dataType:"json",dataFilter:function(t,e){if(e in a.rules){var i;switch(e){case"json":try{i=jQuery.parseJSON(t)}catch(n){return t}break;case"xml":i=jQuery(t);break;default:i=t}for(var s in a.rules[e])if(!1===a.rules[e][s].func.call(a.rules[e][s].context,i))return!1}return t}}),this},assign:function(t){t&&jQuery.ajaxSetup({data:t})},filter:function(){var t,e,i;return arguments.length>1&&(3==arguments.length?(t=arguments[0],e=arguments[1],i=arguments[2]):(e=arguments[0],i=arguments[1]),e&&i&&(this.rules[e]=this.rules[e]||[]).push({func:i,context:t})),this}},Scaling={enabled:!1,enable:function(t){return this.enabled=!!t,this},init:function(){if(this.enabled&&document.body){var t=function(){var t={horizontal:document.documentElement.clientWidth/1280,vertical:document.documentElement.clientHeight/720};navigator.userAgent.match(/sonycebrowser/i)&&-1==navigator.userAgent.search(/opera/i)?jQuery(document.body).css("zoom",t.horizontal):jQuery(document.body).css("transform","scale("+t.horizontal+", "+t.vertical+")").css("transform-origin","0 0")};Main.on("resize",this,!0,t)&&t.call(this)}return this}},Config={options:{},load:function(){var t,e;arguments.length>0&&(2==arguments.length?(t=arguments[0],e=arguments[1]):jQuery.isFunction(arguments[0])?e=arguments[0]:t=arguments[0]),jQuery.ajax({url:"config",data:{get:t},context:this,async:!1,success:function(t){jQuery.extend(this.options,t)&&e&&e()}})},get:function(){var t,e,i,n;return(arguments.length>0&&(t=arguments[0],3==arguments.length?(e=arguments[1],n=arguments[2]):jQuery.isFunction(arguments[1])?n=arguments[1]:e=arguments[1]),t&&t in this.options&&(i=this.options[t])&&e&&e in i&&(i=i[e]),n)?n(i):i},enabled:function(t,e){return!0===this.get(t,e)}},Env={variables:{},bind:function(){return Ajaxify.filter(this,"json",function(t){t.assign&&jQuery.extend(this.variables,t.assign)}),this},get:function(t){return t?this.variables[t]:this.variables}},Viewport={set:function(t){t&&Main.meta.set([{name:"viewport",content:!0===t?"width=1280, user-scalable=no":t}])}},Proto={extend:function(t){return jQuery.extend(this,t)},platform:function(t,e){if(t)return jQuery.extend({name:t,js:!1,css:!1,viewport:!1,objects:!1,history:!0,scaling:!1,menu:!1,detect:function(){return!1},storage:function(){return Proto.storage()},init:function(t){t&&t()},duid:function(){var t=Storage.device.get("duid"),e=function(){var t=function(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t)};return t()};return t||((t=e())&&Storage.device.set("duid",t)?t:void 0)},keyset:function(){return Proto.keyset()},player:function(){return Proto.player("html5")},back:function(){this.exit()},exit:function(){history.go(-(history.length+1)),window.close()}},e)},keyset:function(t){var e={},i={up:["UP"],down:["DOWN"],left:["LEFT"],right:["RIGHT"],enter:["ENTER"],back:["BACK","BACK_SPACE"],info:["INFO"],plus:["PAGE_UP","TRACK_NEXT"],minus:["PAGE_DOWN","TRACK_PREV"],n0:["0"],n1:["1"],n2:["2"],n3:["3"],n4:["4"],n5:["5"],n6:["6"],n7:["7"],n8:["8"],n9:["9"],play:["PLAY"],stop:["STOP"],pause:["PAUSE"],forward:["FAST_FWD"],backward:["REWIND"]};for(var n in i)for(var s in i[n]){var r=(t||window)["VK_"+i[n][s]]||!1;!1!==r&&(n in e?jQuery.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r)}return e},storage:function(){if(window.localStorage&&"setItem"in localStorage&&jQuery.isFunction(localStorage.setItem))return{get:function(t){return localStorage.getItem(t)},set:function(t,e){localStorage.setItem(t,e)},remove:function(t){localStorage.removeItem(t)}}},player:function(){arguments.length>0&&(2==arguments.length?(t=arguments[0],e=arguments[1]):jQuery.isPlainObject(arguments[0])?e=arguments[0]:t=arguments[0]);var t,e,i,n,s=jQuery.extend({style:"visibility: hidden; background: #000; width: 0; height: 0; position: absolute; -o-object-fit: fill; object-fit: fill;",plays:!1,playing:!1,paused:!1,duration:!1,pos:!1,supports:{psize:!0,audio:!1,subtitles:!1},init:function(t){(!this.create||(i=this.create()))&&!1!==this.prepare()&&t&&t()},create:function(e){if(i&&(e&&(this.style=i.style.cssText),this.destroy()),"html5"!=t)return jQuery.create("object",!1,{type:"cehtml"==t?"":t,style:this.style},{PlayStateChange:function(){switch(this.playState){case 1:!1===s.duration&&(s.pos>0&&this.seek(1e3*s.pos),s.trigger("duration",[s.duration=Math.ceil(this.playTime/1e3)||0])),s.tick(!0);break;case 3:s.tick(!1,"buffering");break;case 5:s.tick(!1),s.state("ended",[s.duration>s.pos?s.duration:s.pos]);break;case 6:s.tick(!1),s.trigger("error")}}});var n=jQuery.create("video",!1,{style:this.style});return n.addEventListener("waiting",function(){s.tick(!1,"buffering")}),n.addEventListener("durationchange",function(){!1===s.duration&&s.trigger("duration",[s.duration=Math.ceil(this.duration)||0])}),n.addEventListener("loadeddata",function(){s.state("loaded")}),n.addEventListener("canplay",function(){s.paused&&s.state("paused")}),n.addEventListener("playing",function(){s.tick(!0)}),n.addEventListener("progress",function(){s.playing||this.currentTime>0&&s.tick(!0)}),n.addEventListener("ended",function(){s.tick(!1),s.state("ended",[s.duration>s.pos?s.duration:s.pos])}),n.addEventListener("error",function(){s.tick(!1),s.trigger("error")}),n},prepare:function(){return!0},destroy:function(){i&&(jQuery(i).remove(),i=!1)},ticker:!1,tick:function(t,e){this.ticker&&(clearInterval(this.ticker),this.ticker=!1),(this.playing=t)&&(this.ticker=jQuery.interval(this,100,function(){var t=Math.round(((this.pos||0)+(this.paused?0:.1))*100)/100;this.pos===t||this.trigger("time",[this.pos=t])}),e=e||"playing"),e&&this.state(e)},mime:function(e){return e.indexOf("m3u8")>0?"application/vnd.apple.mpegurl":"html5"==t&&i.canPlayType("video/mpeg").replace(/no/,"")?"video/mpeg":"video/mp4"},play:function(e,n){if(this.stop(),e){var r=this.mime(e);if(r){if("html5"==t){if(jQuery.create("source",i,{src:e,type:r}),n>0){var a=function(){this.duration>0&&n<=this.duration&&(this.currentTime=s.pos=n),i.removeEventListener("loadedmetadata",a)};i.addEventListener("loadedmetadata",a)}i.load(),i.play()}else n>0&&(this.pos=n),(i=this.create(!!(t=r))).data=e,i.play(1);return this.trigger("play",[e,n],"buffering"),this.plays=!0}}return!1},stop:function(){return!!this.plays&&("html5"==t?(i.pause(),i.innerHTML=""):i.stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(e){return!!this.plays&&!!this.playing&&("html5"==t?e?i.pause():i.play():i.play(e?0:1),(this.paused=e)?this.state("paused"):this.state("playing"),this.paused)},seek:function(e){if(this.plays&&this.playing&&this.duration>0&&e>=0&&e<=this.duration)try{return"html5"==t?i.currentTime=e:i.seek(1e3*e),this.trigger("seek",[this.pos=e]),!0}catch(n){}return!1},psize:{inited:!1,init:function(){return this.inited=!0},set:function(t){var e=!1;if(this.inited&&!1!==t){var i,n=1280,r=720,a=0,o=0;switch(t){case 4:i="21:9",r=550,o=85;break;case 3:i="18:9",r=640,o=40;break;case 2:i="14:9",n=1120,r=719,a=80,o=1;break;case 1:i="4:3",n=960,r=719,a=160,o=1;break;default:t=0,i="16:9"}e={mode:t,info:i},s.resize({width:n,height:r,left:a,top:o})}return e},reset:function(){this.inited=!1}},audio:!1,subtitles:!1,state:function(t,e){t&&Main.trigger("player.state",[t,e])},trigger:function(t,e,i){t&&(Main.trigger("player."+t,e),i&&this.state(i))},hide:function(){this.toggle(!1),this.cover&&this.cover(!1),this.trigger("hide")},show:function(){this.toggle(!0),"fullscreen"==this.mode&&this.cover&&this.cover(!0),this.trigger("show",[this.mode])},visible:function(){return"hidden"!=i.style.visibility},toggle:function(t){i.style.visibility=t?"visible":"hidden"},offset:function(t){var e={top:i.offsetTop,left:i.offsetLeft,width:i.offsetWidth,height:i.offsetHeight};return t?t(e):e},mode:!1,resize:function(t,e){if(t){var n,s,r,a;i.style.position="absolute",i.style.zIndex=1,n=t.left||0===t.left?t.left:i.offsetLeft,i.style.left=n+"px",s=t.top||0===t.top?t.top:i.offsetTop,i.style.top=s+"px",r=t.width?t.width:1280,i.style.width=r+"px",a=t.height?t.height:720,i.style.height=a+"px",e&&(this.mode="fullscreen"==e?e:"preview",this.cover&&this.cover("fullscreen"==e)),this.adapt&&this.adapt(),this.trigger("resize",[this.mode])}},adapt:!1,cover:function(t){t&&(t=this.visible()),n?n.style.visibility=t?"visible":"hidden":t&&(n=jQuery.create("div",!1,{style:"position: absolute; top: 0; left: 0; bottom: 0; right: 0; visibility: visible; background: #000; width: 100%; height: 100%;"}))},reset:function(){this.tick(this.plays=this.paused=this.duration=this.pos=!1)}},e);if(!s.audio){if("html5"==t)s.supports.audio&&(s.audio={total:!1,track:!1,inited:!1,init:function(){if(!this.inited){var t=i.audioTracks?i.audioTracks.length:0;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;if(this.inited&&this.total>0){if(t>=this.total&&(t=0),!1!==this.track&&this.track==t)e=t;else if(t in i.audioTracks){if(!i.audioTracks[t].enabled){for(var n=0;n<this.total;n++)i.audioTracks[n].enabled=!1;i.audioTracks[t].enabled=!0}this.track=e=t}}return e},reset:function(){this.total=this.track=this.inited=!1}});else if("cehtml"==t){var r=Platform.option("tracks");r&&(s.audio={inited:!1,init:function(){return this.inited=!0},count:function(){return r.length},set:function(t){var e=!1;return this.inited&&(t>=r.length&&(t=0),i.audioLanguage=r[t],e=t),e},reset:function(){this.inited=!1}},s.supports.audio=!0)}}return s},scene:function(t,e){if(t)return jQuery.extend({name:t,container:!1,swipe:!1,legend:!1,skel:!1,show:function(t){t&&t()},hide:function(t){t&&t()},on:!1,off:!1,open:function(t){(this.container=(this.container||jQuery('<div id="'+this.name+'" class="scene"></div>').html(!1!==this.skel?jQuery.isFunction(this.skel)?this.skel():this.skel:"").appendTo("#scenes")).hide())&&(this.on&&this.on(),this.swipe&&this.swipe.on(),this.legend&&Legend.show(this.legend),Navi.on(this.container.show()),this.show(function(){(Focus.isset()||Navi.focus())&&t&&t()}))},close:function(t){this.container&&(this.container.hide(),this.off&&this.off(),this.swipe&&this.swipe.off(),Legend.hide(),Navi.off().reset(),this.hide(t))}},e)},dialog:function(t){return(t=jQuery.extend({id:!1,sidebar:!1,opened:!1,container:!1,title:!1,legend:!1,body:!1,on:!1,off:!1,open:function(){return jQuery(".dialog").hide(),Overlay.show(),this.container=jQuery('<div class="dialog'+(this.sidebar?" sidebar "+this.sidebar:"")+'"'+(this.id?' id="'+this.id+'"':"")+">"+(this.title?'<div class="title">'+Language.message(this.title)+"</div>":"")+(this.body?'<div class="body">'+(jQuery.isFunction(this.body)?this.body():this.body)+"</div>":"")+(this.legend?Legend.html(this.legend):"")+"</div>").appendTo(document.body).show(),!1===this.sidebar&&this.container.center(),this.on&&this.on(),Navi.save().on(this.container),this},close:function(){return this.container&&(this.off&&this.off(),Navi.is(this.container)&&Navi.off().restore(),this.container.remove(),this.container=!1,jQuery(".dialog").last().show(),Overlay.hide()),this}},t)).opened&&t.open(),t},alert:function(){var t,e,i;return arguments.length>0&&(3==arguments.length?(t=arguments[0],e=arguments[1],jQuery.isPlainObject(arguments[2])&&(i=arguments[2])):2==arguments.length?(t=arguments[0],jQuery.isPlainObject(arguments[1])?i=arguments[1]:e=arguments[1]):jQuery.isPlainObject(arguments[0])?i=arguments[0]:t=arguments[0]),i=this.dialog(jQuery.extend({title:e,message:t,back:!0,legend:{back:{key:"back",label:["navigation","back"],enabled:function(){return i.back}}},body:function(){return'<div class="alert">'+Language.message(this.message)+"</div>"},on:function(){this.container.on("key:back.dialog",function(){i.back&&(jQuery.isFunction(i.back)?i.back():i.close())})},off:function(){this.container.off(".dialog")}},i))},form:function(t){return t=this.dialog(jQuery.extend({fields:!1,actions:!1,back:!0,legend:{enter:{key:"enter",label:["navigation","enter"]},ud:{key:"down",icon:"ud",label:["navigation","ud"]},back:{key:"back",label:["navigation","back"],enabled:function(){return t.back}}},body:function(){var t="";if(this.fields=jQuery.isFunction(this.fields)?this.fields():this.fields){var e="";for(var i in this.fields)(jQuery.isFunction(this.fields[i].enabled)?this.fields[i].enabled():this.fields[i].enabled)!==!1&&(e+='<div class="focusable field">',this.fields[i].label&&(e+='<div class="label">'+Language.message(this.fields[i].label)+"</div>"),e+='<div class="input" data-name="'+i+'"'+(this.fields[i].protect?' data-protect="'+this.fields[i].protect+'"'+("secure"==this.fields[i].protect&&this.fields[i].secure?' data-secure="'+this.fields[i].secure+'"':""):"")+("mask"in this.fields[i]?' data-mask="'+this.fields[i].mask+'"':"")+(this.fields[i].layout?' data-layout="'+this.fields[i].layout+'"':"")+'><div class="value"'+(this.fields[i].slice?' data-slice="'+this.fields[i].slice+'"':"")+">"+("value"in this.fields[i]?jQuery("<div />").text(this.fields[i].value).html():"")+"</div></div></div>");e&&(t+='<div class="fields">'+e+"</div>")}if(this.actions=jQuery.isFunction(this.actions)?this.actions():this.actions){var n="";for(var i in this.actions)(jQuery.isFunction(this.actions[i].enabled)?this.actions[i].enabled():this.actions[i].enabled)!==!1&&(n+='<div class="focusable action '+i+'" data-action="'+i+'">'+Language.message(this.actions[i].title)+"</div>");n&&(t+='<div class="actions">'+n+"</div>")}return t&&(t='<div class="navigable form" data-loop="true" data-plane="vertical">'+t+"</div>"),t},on:function(){this.container.on("key:enter.dialog key:mouse.dialog key:num.dialog",".field",function(t){jQuery(this).find(".input").input().focus(),"num"==t.key.name&&Navi.trigger("n"+t.key.num)}).on("key:enter.dialog key:mouse.dialog",".action",function(){t.submit(this,function(e){var i,n;(n=e.callback)&&(e.submit&&(i=t.serialize()),n(i))})}).on("key:back.dialog",function(){t.back&&(jQuery.isFunction(t.back)?t.back():t.close())}).find(".input").each(function(){jQuery(this).input()})},off:function(){this.container.off(".dialog")},submit:function(t,e){return((t=jQuery(t).data("action"))&&(t=this.actions[t]),e)?e(t):t},serialize:function(){var t={};return this.container.find(".input").each(function(){jQuery(this).input().serialize(function(e,i){t[e]=i})}),t}},t))},fields:function(t,e,i){var n={};for(var s in t)t[s]&&(n[s]=jQuery.extend(!0,{},jQuery.isPlainObject(t[s])?t[s]:{label:t[s]}),jQuery.extend(n[s],{label:jQuery.merge(e?jQuery.isArray(e)?jQuery.merge([],e):[e]:[],[n[s].label||s])}),i&&s in i&&(n[s].value=i[s]));return n},menu:function(t){return t=this.dialog(jQuery.extend({items:!1,icognize:!1,paging:10,legend:{enter:{key:"enter",label:["navigation","enter"]},ud:{key:"down",icon:"ud",label:["navigation","ud"]},back:{key:"back",label:["navigation","back"]}},body:function(){var t="";if(this.items=jQuery.isFunction(this.items)?this.items():this.items)for(var e in this.items)(jQuery.isFunction(this.items[e].enabled)?this.items[e].enabled():this.items[e].enabled)!==!1&&(t+='<div class="focusable item'+(this.items[e].child?" child":"")+(this.items[e].focused?" focused":"")+'" data-item="'+e+'">'+(this.icognize||this.items[e].icon?'<span class="icon"><img src="resources/images/icons/'+(this.items[e].icon||e)+'.png" /></span>':"")+'<span class="label">'+Language.message(this.items[e].label)+"</span></div>");return t&&(t='<div class="navigable list scrollable" data-loop="true" data-plane="vertical">'+t+"</div>"),t},on:function(){this.container.scrollable().on("focusin.dialog",".item",function(){t.paging>0&&Navi.paging(this,".list",".item",t.paging,!1)}).on("key:enter.dialog key:mouse.dialog",".item",function(){t.enter(this,function(e){e.enter&&e.enter(t),e.sub&&Proto.menu({title:e.label,items:e.sub,opened:!0})})}).on("key:back.dialog"+("left"==this.sidebar?" key:right.dialog":"right"==this.sidebar?" key:left.dialog":""),function(){return t.close(),!1})},off:function(){this.container.off(".dialog")},enter:function(t,e){return((t=jQuery(t).data("item"))&&(t=this.items[t]),e)?e(t):t}},t))},choose:function(t){return t=this.dialog(jQuery.extend({back:!0,options:!1,value:!1,select:!1,paging:10,legend:{enter:{key:"enter",label:["navigation","enter"]},ud:{key:"down",icon:"ud",label:["navigation","ud"]},back:{key:"back",label:["navigation","back"],enabled:function(){return t.back}}},test:function(t){try{if(t.toString()==this.value.toString())return!0}catch(e){}return this.value===t},body:function(){var t="";if(this.options=jQuery.isFunction(this.options)?this.options():this.options)for(var e in this.options)(jQuery.isFunction(this.options[e].enabled)?this.options[e].enabled():this.options[e].enabled)!==!1&&(t+='<div class="focusable item'+(this.test(this.options[e].value)?" focused selected":"")+'" data-value="'+this.options[e].value+'"><span class="label">'+Language.message(this.options[e].label)+(this.options[e].alt?" ("+this.options[e].alt+")":"")+"</span></div>");return t&&(t='<div class="navigable list scrollable" data-loop="true" data-plane="vertical">'+t+"</div>"),t},on:function(){this.container.scrollable().on("focusin.dialog",".item",function(){t.paging>0&&Navi.paging(this,".list",".item",t.paging,!1)}).on("key:enter.dialog key:mouse.dialog",".item",function(){if(jQuery.isFunction(t.select)){var e=jQuery(this).data("value");try{t.select(e)}catch(i){t.close()}}}).on("key:back.dialog",function(){t.back&&(jQuery.isFunction(t.back)?t.back():t.close())})},off:function(){this.container.off(".dialog")}},t))}},Platform=(a=!1,b={available:[],add:function(t){return t&&this.available.push(t),this},detect:function(t){var e;for(var i in this.available)this.available[i].detect()&&(e=this.available[i]);(a=e)&&(Ajaxify.assign({platform:a.name}),a.viewport&&Viewport.set(a.viewport),a.scaling&&Scaling.enable(!0),a.history&&History.enable(!0),t&&t())},init:function(t){if(a){var e=function(){a.init(function(){var e=b.get("duid");e&&(Ajaxify.assign({duid:e}),t&&t())})};a.css&&Main.css.load(a.css),a.objects&&Main.objects.append(a.objects),a.js?Main.js.load(a.js,e,this):e.call(this)}},is:function(t){return this.get("name")==t},option:function(t){return Config.get("platform",t)},callable:function(t){return this.has(t,jQuery.isFunction)},has:function(t,e){return!!a&&!!t&&t in a&&(!e||e(a[t]))},get:function(t){var e;return a&&t&&(e=jQuery.isFunction(a[t])?a[t]():a[t]),e},call:function(t){a&&t&&jQuery.isFunction(a[t])&&a[t]()}}),Ping={enabled:function(){return Config.enabled("ping")},init:function(){this.enabled()&&jQuery.ajax({url:"ping",success:function(t){var e=Number(t.interval)||0;if(e>0){var t=0;jQuery.interval(!1,1e3*e,function(){jQuery.ajax({url:"ping",data:{ping:++t}})})}}})}},Storage={get:function(t){return this.server.enabled()?this.server.get(t):this.device.get(t)},set:function(t,e){return this.server.enabled()?this.server.set(t,e):this.device.set(t,e)},server:{sid:!1,enabled:function(){return"server"==Config.get("storage")},init:function(t){this.enabled()?jQuery.ajax({url:"storage",context:this,success:function(e){(this.sid=e.sid)&&t&&t()}}):t&&t()},get:function(t){var e;return this.sid&&t&&jQuery.ajax({url:"storage",data:{sid:this.sid,get:t},async:!1,success:function(i){i.get&&(e=i.get[t])}}),e},set:function(t,e){var i=!1;return this.sid&&t&&jQuery.ajax({url:"storage",async:!1,data:{sid:this.sid,set:t,value:e},success:function(e){i=e.set==t}}),i}},device:{storage:!1,init:function(){return this.storage=Platform.get("storage")||!1,this},get:function(t){var e;if(t){if(this.storage)e=this.storage.get(t);else{var i=document.cookie.match(RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));i&&(e=decodeURIComponent(i[1]))}try{e=jQuery.parseJSON(e)}catch(n){}}return e},set:function(t,e){var i=!1;return t&&(e=jQuery.toJSON(e))&&(this.storage?this.storage.set(t,e):document.cookie=t+"="+encodeURIComponent(e)+"; expires=Fri, 31 Dec 9999 23:59:59 GMT",i=!0),i},remove:function(t){t&&(this.storage?this.storage.remove(t):document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT")}}},Helper=a={ready:!1,init:function(){return this.ready||(this.ready=!0,this.deferred.map(function(t){a.prompt.apply(a,t)})),this},helped:!1,deferred:[],prompt:function(t,e,i,n){if(t&&e){if(this.ready){if(-1==(this.helped=this.helped||Storage.device.get("helpers")||[]).indexOf(t)){var s=Proto.alert(e,i,{legend:{back:{key:"back",label:["navigation","close"]}},back:function(){a.helped.push(t)&&Storage.device.set("helpers",a.helped)&&n&&n(),s.close()}});s.open()}else n&&n()}else this.deferred.push(arguments)}},reset:function(){Storage.device.remove("helpers")}},Censor=(b=!1,a={enabled:function(){return!1!==Storage.device.get("censor")},toggle:function(t){var e=this.enabled();if(e===t)return!0;if(Storage.device.set("censor",!0===t||!1===t?t:!e)){Main.reload();return}return!1},validate:function(t){return t&&4==t.length&&t==(Storage.get("pin")||"0000")},change:function(t){return!!(t&&jQuery.isNumeric(t))&&4==t.length&&Storage.set("pin",t)},confirm:function(){var t,e;if(arguments.length>0&&(2==arguments.length?(t=arguments[0],e=arguments[1]):e=arguments[0]),b)e&&e.call(t);else{var i=function(i){var s=!1;return i&&((s=a.validate(i.pin))?(n.close(),e&&e.call(t)):Proto.alert(["censor","invalid"],["censor","control"]).open()),s},n=Proto.form({id:"censor",title:["censor","control"],fields:{pin:{label:["censor","enter"],layout:"pin",slice:-4,mask:"*"}},actions:{confirm:{title:["censor","confirm"],submit:!0,callback:i},remember:{title:["censor","remember"],submit:!0,callback:function(t){b=i(t)}}}});n.open()}},dialog:function(){var t=Proto.menu({title:["censor","control"],items:{status:{label:["censor",a.enabled()?"disable":"enable"],enter:function(){a.toggle()&&t.close()}},pin:{label:["censor","change"],enter:function(){var t=Proto.form({id:"censor",title:["censor","change"],fields:{pin:{label:["censor","new"],layout:"pin",slice:-4}},actions:{save:{title:["censor","save"],submit:!0,callback:function(e){a.change(e.pin)?t.close():Proto.alert(["censor","not changed"],["censor","change"]).open()}}}});t.open()}}}});t.open()}}),Focus={element:!1,isset:function(){return!!this.element},find:function(t){var e;return jQuery(".focusable",t).each(function(){if(jQuery(this).hasClass("focused"))return e=this,!1;e=e||this}),e},has:function(t){return jQuery(t).find(".focusin").isset()},visible:function(t){return(t=t?jQuery(t):this.element)&&t.is(":visible")},is:function(t){return!!this.element&&this.element.is(t)},get:function(){return this.element},set:function(t,e,i){var n=!1;if(t=!!t&&jQuery(t)){if(t.focusable())this.blur().element=t.is(".focusin.focused")?t:t.parents(".navigable").last().find(".focused").removeClass("focused").end().end().end().addClass("focusin").addClass("focused").trigger("focusin"),n=!0;else{var s=Navi.search(t);if(-1!=s)return(n=Navi.save().restore(s).focus(t,e,i))&&Navi.save(s),Navi.restore(),n;t.hasClass("focused")&&(n=!0)}n&&e&&Navi.trigger(t,e,i)}return n},blur:function(){return this.element&&this.element.removeClass("focusin").trigger("focusout").redraw(),this.reset()},reset:function(){return this.element=!1,this}},Keyset=a={keys:{},init:function(t){var e=Platform.get("keyset");if(e=jQuery.isFunction(e)?e():e){for(var i in e)if(e[i]=jQuery.isArray(e[i])?e[i]:[e[i]])for(var n in e[i])this.keys[e[i][n]]=i;t&&t()}},bind:function(){return jQuery(document).on("keydown",function(t){var e=a.keys[t.keyCode||t.which];e&&Navi.trigger(e)}),this}},Navi=a={numpad:["n0","n1","n2","n3","n4","n5","n6","n7","n8","n9"],container:!1,saved:[],bind:function(){return jQuery(document).on("keydown click contextmenu mousewheel wheel touchmove",function(t){t.preventDefault(),t.stopPropagation()}).click(function(t){3==t.which&&t.stopImmediatePropagation()}).contextmenu(function(t){3==t.which&&a.trigger("back")}),this},trigger:function(){var t,e,i;switch(arguments.length){case 3:e=arguments[0],t=arguments[1],i=arguments[2];break;case 2:jQuery.isArray(arguments[1])?(t=arguments[0],i=arguments[1]):(e=arguments[0],t=arguments[1]);break;default:t=arguments[0]}if(t&&(e=e?jQuery(e):Focus.isset()?Focus.get():this.container)&&!1!==jQuery(document).triggerHandler(jQuery.Event("key"),[t,e])){var n={key:{name:t}};-1!=this.numpad.indexOf(t)&&(n.key.num=t[1],n.key.name=t="num"),e.trigger(jQuery.Event("key:"+t,n),i)}return this},save:function(t){if(this.container){var e={focus:Focus.get(),container:this.container};t||0===t?this.saved[t]=e:this.saved.push(e)}return this},restore:function(t){if(this.saved.length){var e,i=!1;if(t||0===t?e=this.saved[t]:(e=this.saved.pop(),i=!0),e){if(jQuery.contains(document.body,e.container[0]))this.on(e.container,e.focus);else{if(i)return this.restore();delete this.saved[t]}}}return this},reset:function(){return this.saved=[],this},contains:function(t,e){return t&&(e=e||this.container)&&jQuery(e).find(t).isset()},search:function(t){var e=-1;if(t){for(var i in this.saved)if(this.contains(t,this.saved[i].container)){e=i;break}}return e},focus:function(t,e,i){return this.container&&Focus.set(Focus.visible(t)?t:Focus.find(this.container),e,i),this},is:function(t){return this.container&&this.container.is(t)},on:function(t,e){return(this.off().container=t&&(t=jQuery(t)).isset()?t:jQuery(document))&&(this.focus(e).container.on("key:left.navi key:right.navi key:up.navi key:down.navi",function(t){if(t.isPropagationStopped())return!1;if(Focus.visible()){var e,i=!1,n=Focus.get(),s=t.key.name,r=jQuery(n).parents(".navigable").last(),o=r.data("plane"),u=!!r.data("loop"),c="last";if("horizontal"==o&&"left"==s||"vertical"==o&&"up"==s?e="prev":("horizontal"==o&&"right"==s||"vertical"==o&&"down"==s)&&(e="next"),"next"==e&&(c="first"),e){var h,l=r.find(".focusable"),$=l.index(n)+("next"==e?1:-1);($>=0||u)&&(h=l.eq($)),(h=h&&h.isset()?h:!!u&&l[c]())&&(i=Focus.set(h))}return!i}}).on("mouseenter.navi mousemove.navi mousewheel.navi wheel.navi swiping.navi",".navigable",function(t){switch(t.type){case"swiping":jQuery(this).data("swiping","start"==arguments[1]||"move"==arguments[1]);break;case"mouseenter":case"mousemove":if(0==t.offsetX&&0==t.offsetY)return}Focus.has(this)||Focus.set(Focus.find(this))}),jQuery(document).on("key:left.navi key:right.navi key:up.navi key:down.navi",function(t){if(Focus.visible()){for(var e,i,n=Focus.get(),s=t.key.name,r=!1,o=[],u=n[0].getBoundingClientRect(),c=n.parents(".navigable").last().find(".focusable:visible"),h=0;h<c.length;h++)if((i=c[h].getBoundingClientRect()).left!=u.left||i.top!=u.top){switch(e=!1,s){case"left":e=u.left>i.left;break;case"right":e=u.right<i.right;break;case"up":e=u.top>i.top;break;case"down":e=u.bottom<i.bottom}e&&o.push({element:c[h],bounds:i})}for(var l,$,d,f,x,p,g,v=!1,b=9999999,m=0,_=9999999,y=0,h=0;h<o.length;h++){if(l=!0,$=!!o[h].element.dataset&&o[h].element.dataset.focusing){switch($=$.split(","),s){case"up":l=$[0];break;case"right":l=$[1];break;case"down":l=$[2];break;case"left":l=$[3]}l=!!parseInt(l)}if(l){switch(d=!1,x=u,p=o[h].bounds,s){case"left":case"right":x.top>p.top&&(g=p,p=x,x=g),x.bottom>p.top&&(d=x.top>p.right?p.top-x.right:p.height);break;case"up":case"down":x.left>p.left&&(g=p,p=x,x=g),x.right>p.left&&(d=x.left>p.right?p.left-x.right:p.width)}if(m=Math.abs(o[h].bounds.top-u.top),y=Math.abs(o[h].bounds.left-u.left),v&&!d)continue;if(d&&!v){b=m,_=y,r=o[h].element,v=!0;continue}switch(s){case"left":case"right":f=v?y<_||y==_&&m<b:m<b||m==b&&y<_;break;case"up":case"down":f=v?m<b||m==b&&y<_:y<_||y==_&&m<b}f&&(b=m,_=y,r=o[h].element)}}if(r&&Focus.set(r))return!1}}).on("click.navi",".focusable, .clickable",function(t){if(t.offsetX>0||t.offsetY>0){var e=jQuery(this).data("key");return e?jQuery(this).clickable()&&a.trigger(e):(jQuery(this).focusable()?jQuery(this).hasClass("focused")||Focus.set(this):jQuery(this).clickable())&&a.trigger(this,"mouse",[t]),!1}}).on("click.navi",function(t){(t.offsetX>0||t.offsetY>0)&&(2==t.which?jQuery(t.target).trigger(jQuery.Event(t)):a.trigger(a.container,"mouse",[t]))}).on("mousewheel.navi wheel.navi",function(t){0==jQuery.active&&a.trigger((-t.originalEvent.deltaY||t.originalEvent.wheelDelta)>=0?"up":"down")})),this},off:function(){return Focus.reset(),this.container&&(this.container.off(".navi"),this.container=!1),jQuery(document).off(".navi"),this},paging:function(t,e,i,n,s,r){var a,o=jQuery(t).parents(e+".navigable"),u=o[0].parentNode,c=!0;if(!(o.hasClass("scrollable")&&o.data("swiping"))){(a=o.data("items"))?c=!1:a=o.data("items",o.find(i+".focusable").each(function(t){jQuery(this).data("index",t)})).data("items");var h=jQuery(t).data("index");if(0===h||h>0){if(!s&&jQuery(t).viewable(u)){c&&o.trigger("paging");return}var l=parseInt(h/n)+1;if(s){var $,d=!!o.data("loop"),f=parseInt((a.length-1)/n)+1;r<0?0==(l+=r)&&(l=d?f:1):r>0&&f<(l+=r)&&(d?l=1:$=a.eq(a.length-1)),$||($=a.eq((l-1)*n)),Focus.set($)}else{var x=a.length-l*n,p=0,g=u.offsetHeight/n;x<0&&l>1&&(p=Math.abs(x)*g),o.css("top",-((l-1)*(g*n))+p).trigger("paging")}}}}},Language=a={lid:!1,preset:!1,langs:!1,messages:!1,init:function(t){jQuery.ajax({url:"lang",context:this,success:function(e){(this.langs=e.langs)&&(this.preset=e.preset)&&this.load(!1,t)}})},load:function(t,e){var i=!0,n=!t&&Storage.device.get("lid");this.has(n)?i=!1:(n=this.preset,1==this.count()&&this.has(this.preset)&&(i=!1)),n&&jQuery.ajax({url:"lang",data:{lid:n},context:this,async:!1,success:function(t){(this.messages=t[n])?(Ajaxify.assign({lid:i?n:this.lid=n}),i?this.choose():e&&e()):this.preset==n||this.load(!0,e)}})},append:function(t,e){this.lid&&t&&jQuery.ajax({url:"lang",data:{prefix:t},context:this,async:!1,success:function(t){jQuery.extend(this.messages,t)&&e&&e()}})},has:function(t){return t&&t in this.langs},count:function(){var t=0;for(var e in this.langs)t+=1;return t},message:function(t,e){var i;if(jQuery.isArray(t))for(var n in t){if(i){if(t[n]in i){i=i[t[n]];continue}}else if(t[n]in this.messages){i=this.messages[t[n]];continue}i=t[n];break}else i=t;try{i=i.toString()}catch(s){return i}return!0!==e&&(-1!=i.indexOf("%")&&(i=i.replace(/\%(\w+)/g,function(t,e){var i=[function(){return Storage.device.get(e)},function(){return Platform.get(e)},function(){return Env.get(e)}];for(var n in i)try{if((i[n]=i[n]()).toString().length)return i[n]}catch(s){}return t})),i=i.replace(/\\n/g,"<br />")),i},choose:function(){var t=Proto.choose({title:["language","choose"],back:function(){a.lid?t.close():Main.back()},value:a.lid,options:function(){var t=[];for(var e in a.langs)t.push({label:a.langs[e],value:e});return t},select:function(e){a.set(e)&&t.close()}});t.open()},set:function(t){if(this.has(t)){if(t==this.lid)return!0;if(Storage.device.set("lid",t)){Helper.reset(),Main.reload();return}}return!1}},Notify={ready:!1,init:function(){return this.ready||(this.ready=!0,this.deferred.map(this.alert)),this},deferred:[],bind:function(){return Ajaxify.filter(this,"json",function(t){t.alert&&(this.ready?this.alert(t.alert):this.deferred.push(t.alert))}),this},alert:function(t){return t&&Proto.alert(t).open(),this}},Keyboard=_0x5e6184={container:!1,input:!1,shift:!1,caps:!1,preset:!1,layout:!1,layouts:{},defaults:{pin:[["1","2","3","4","5","6","7","8","9","0",["backspace"],["enter"]]]},init:function(_0x1570c8){Config.get("keyboards",function(_0x3ec67d){var _0xee0862=!0;if(_0x3ec67d)for(var _0x537377 in _0x3ec67d){if(jQuery.ajax({type:"GET",url:"resources/keyboards/"+_0x3ec67d[_0x537377]+".js?"+Math.random(),async:!1,data:!1,success:function(_0x46cb59){try{_0x5e6184.layouts[_0x3ec67d[_0x537377]]=eval(_0x46cb59)}catch(a){_0xee0862=!1}},error:function(){_0xee0862=!1},dataType:"text"}),!_0xee0862)break;_0x5e6184.preset||(_0x5e6184.preset=_0x3ec67d[_0x537377])}_0xee0862&&_0x1570c8&&_0x1570c8()})},focus:function(t){return this.blur(t).show()},blur:function(t){return this.input&&this.input.blur(),this.close().input=t||!1,this},on:function(){this.container.on("key:num.keyboard",function(t){_0x5e6184.container.find(".key:contains("+t.key.num+")").focusin("enter")}).on("key:enter.keyboard key:mouse.keyboard",".key",function(){switch(jQuery(this).data("action")){case"enter":_0x5e6184.blur();break;case"shift":_0x5e6184.container.find(".key.toggle").removeClass("toggle"),_0x5e6184.container.removeClass("shifted"),_0x5e6184.shift?(_0x5e6184.shift=!1,_0x5e6184.caps=!0,jQuery(this).addClass("toggle")):_0x5e6184.caps?_0x5e6184.caps=!1:_0x5e6184.shift=!0,(_0x5e6184.shift||_0x5e6184.caps)&&_0x5e6184.container.addClass("shifted");break;case"layouts":_0x5e6184.hide().choose();break;case"backspace":var t=_0x5e6184.input.value.plain();t.length&&_0x5e6184.input.value.set(t.slice(0,-1));break;default:var e=jQuery(this).text()||"";e.length&&((_0x5e6184.shift||_0x5e6184.caps)&&(e=e.toUpperCase()),_0x5e6184.shift&&(_0x5e6184.shift=!1,_0x5e6184.container.removeClass("shifted")),_0x5e6184.input.value.set(_0x5e6184.input.value.plain()+e))}}).on("key:back.keyboard",function(){_0x5e6184.blur()})},off:function(){this.container.off(".keyboard")},show:function(t){return this.hide().input&&(this.layout=t||this.layout||this.input.layout()||this.preset)&&(t=this.layouts[this.layout]||this.defaults[this.layout])&&(t=t.map(function(t){return'<div class="row">'+(t=t.map(function(t){return jQuery.isArray(t)?'<div data-action="'+(t[1]||t[0])+'" class="focusable key action '+(t[1]||t[0])+'">'+(t[1]?t[0]:"&nbsp;")+"</div>":'<div class="focusable key">'+t+"</div>"})).join("")+"</div>"}),this.container=jQuery('<div id="keyboard"><div class="inner"><div class="navigable" data-loop="true" data-plane="horizontal">'+t.join("")+"</div></div></div>").appendTo(document.body).show(),this.on(),Navi.save().on(this.container)),this},hide:function(){return this.container&&(this.off(),Navi.is(this.container)&&Navi.off().restore(),this.container.remove(),this.container=!1),this},close:function(){return this.hide().reset()},reset:function(){return this.shift=this.caps=this.layout=!1,this},choose:function(){var t=Proto.choose({title:["keyboard","choose"],back:function(){t.close(),_0x5e6184.show()},value:_0x5e6184.layout,options:function(){var t=[];for(var e in _0x5e6184.layouts)t.push({label:["keyboards",e],value:e});return t},select:function(e){t.close(),_0x5e6184.show(e)}});t.open()}},Signin=(b=!1,a={forms:!1,enabled:function(t){return Auth.enabled()&&Config.enabled("signin")&&(!t||this.has(t))},has:function(t){return t&&this.forms&&t in this.forms&&this.forms[t]},setup:function(t){return t&&(this.forms=t),this},data:function(){return Storage.device.get("signin")},enter:function(t,e,i,n){if(this.enabled("fields")){var s=!1,i=i||this.data()||{};for(var r in this.forms.fields)if(r in i)s=!0;else{s=!1;break}if(e&&(s||n))Auth.request(function(e){if(e.valid?n&&Storage.device.set("signin",i):Storage.device.remove("signin"),e.token)b=!!e.valid,t&&t();else if(e.confirm)a.confirm(t,i);else if(e.signup)Signup.dialog(t,jQuery.isPlainObject(e.signup)?e.signup:i);else{var s=Proto.alert(["auth",e.error||"signin failed"],["auth","signin"],{back:function(){s.close(),a.enter(t,!1,i)}});s.open()}},{signin:i});else{var o=Proto.form({title:["auth","signin"],back:function(){Auth.authorized()?o.close():Main.back()},fields:function(){return Proto.fields(a.forms.fields,["auth"],i)},actions:{signin:{title:["auth","signin"],submit:!0,callback:function(e){a.enter(t,!0,e,!0),o.close()}},signup:{title:["auth","signup"],callback:function(){o.close(),Signup.dialog(t)},enabled:function(){return Signup.enabled()}}}});o.open()}}},confirm:function(t,e,i){if(e&&this.enabled("confirm")){var n=Proto.form({title:["auth","confirm needed"],back:function(){n.close(),a.enter(t,!1,e)},fields:function(){return Proto.fields(a.forms.confirm,["auth"],i)},actions:{confirm:{title:["auth","confirm"],submit:!0,callback:function(i){Auth.request(function(n){if(b=!!n.token)t&&t();else{var s=Proto.alert(["auth",n.error||"confirm failed"],["auth","confirm needed"],{back:function(){s.close(),a.confirm(t,e,i)}});s.open()}},{signin:e,confirm:i}),n.close()}}}});n.open()}},stored:function(){return!!this.data()},signed:function(){return b},unsigned:function(){return!this.signed()},exit:function(){b&&(Storage.device.remove("signin"),Helper.reset(),Main.reload())}}),Signup=a={forms:!1,enabled:function(t){return Auth.enabled()&&Config.enabled("signup")&&(!t||this.has(t))},has:function(t){return t&&this.forms&&t in this.forms&&this.forms[t]},setup:function(t){return t&&(this.forms=t),this},dialog:function(t,e){if(this.enabled()){var i,n=function(){Signin.enabled()?(i.close(),Signin.enter(t,!1)):Auth.authorized()?i.close():Main.back()};(i=this.has("fields")?Proto.form({title:["auth","signup"],back:n,fields:function(){return Proto.fields(a.forms.fields,["auth"],e)},actions:{signup:{title:["auth","signup"],submit:!0,callback:function(e){Auth.request(function(i){if(i.token)t&&t();else if(i.confirm)a.confirm(t,e);else if(i.signin)Signin.enter(t,!1,jQuery.isPlainObject(i.signin)?i.signin:e);else{var n=Proto.alert(["auth",i.error||"signup failed"],["auth","signup"],{back:function(){n.close(),a.dialog(t,e)}});n.open()}},{signup:e}),i.close()}}}}):Proto.alert(["auth","how to signup"],["auth","signup"],{back:n})).open()}},confirm:function(t,e,i){if(e&&this.enabled("confirm")){var n=Proto.form({title:["auth","confirm needed"],back:function(){n.close(),a.dialog(t,e)},fields:function(){return Proto.fields(a.forms.confirm,["auth"],i)},actions:{confirm:{title:["auth","confirm"],submit:!0,callback:function(i){Auth.request(function(n){if(n.token)t&&t();else if(n.signin)Signin.enter(t,!1,jQuery.isPlainObject(n.signin)?n.signin:e);else{var s=Proto.alert(["auth",n.error||"confirm failed"],["auth","confirm needed"],{back:function(){s.close(),a.confirm(t,e,i)}});s.open()}},{signup:e,confirm:i}),n.close()}}}});n.open()}}},Auth=(a=!1,{aid:!1,enabled:function(){return Config.enabled("auth")},init:function(t){this.enabled()?(Ajaxify.filter("json",function(t){if(t.auth)return Main.reload(),!1;t.token&&(a=!0,Ajaxify.assign({token:t.token}))}),jQuery.ajax({url:"auth",context:this,success:function(e){(this.aid=e.aid)&&(e.signin&&Signin.setup(e.signin),e.signup&&Signup.setup(e.signup),Signin.enabled()&&Signin.stored()?Signin.enter(t,!0):this.request(function(e){e.token?t&&t():e.signin?Signin.enter(t,!0):e.signup?Signup.dialog(t):Proto.alert(["auth",e.error||"not available"],["auth","signin"],{back:function(){Main.back()},opened:!0})}))}})):t&&t()},request:function(){if(this.aid){var t,e,i=!1;arguments.length>0&&(3==arguments.length?(i=!!arguments[0],e=arguments[1],t=arguments[2]):2==arguments.length?(e=arguments[0],t=arguments[1]):jQuery.isFunction(arguments[0])?e=arguments[0]:t=arguments[0]),jQuery.ajax({url:"auth",data:jQuery.extend(t,{aid:this.aid}),async:i,success:e})}},authorized:function(){return a}}),Player=(a=!1,b={supports:function(t){return t&&a&&a.supports&&t in a.supports&&(jQuery.isFunction(a.supports[t])?a.supports[t]():a.supports[t])&&a[t]},init:function(t){(a=Platform.get("player"))&&a.init(t)},destroy:function(){return this.stop(),a&&(a.destroy&&a.destroy(),a=!1),this},setup:function(t){if(t)for(var e in t)e in this.modes&&jQuery.extend(this.modes[e],t[e]);return this},mode:"preview",modes:{preview:{left:0,top:0,width:"100%",height:"100%"},fullscreen:{left:0,top:0,width:"100%",height:"100%"}},is:function(t){return this.mode==t},view:function(t){return t in this.modes&&t!=this.mode&&(this.mode=t,this.adapt()),this},preview:function(){return this.view("preview")},fullscreen:function(){return this.view("fullscreen")},adapt:function(t){return(t=t||this.mode)in this.modes&&(this.resize(this.modes[t],t).psize.set(!1),this.osd.adapt()),this},resize:function(t,e){return a&&t&&(t.width&&t.width.toString().indexOf("%")>0&&(t.width=Math.ceil(document.body.clientWidth*parseInt(t.width)/100)),t.height&&t.height.toString().indexOf("%")>0&&(t.height=Math.ceil(document.body.clientHeight*parseInt(t.height)/100)),t.right&&(t.left=document.body.clientWidth-t.right),a.resize(t,e||this.mode)),this},offset:function(t){return!!a&&a.offset(t)},events:{},on:function(t,e,i,n,s){if(t&&n&&(t=t.split(" ")))for(var r in t)(this.events[t[r]]=this.events[t[r]]||[])[s?"unshift":"push"]({func:n,context:i,once:e});return this},first:function(t,e,i,n){return this.on(t,e,i,n,!0)},off:function(t){return t?delete this.events[t]:this.events={},this},trigger:function(t,e,i){if(t){var n,s;if(t in this.events){for(var r in this.events[t])if((s=this.events[t][r])&&(s.once&&(this.events[t][r]=!1),!1===(n=s.func.apply(s.context,e))))break}!1!==n&&!1!==i&&Main.trigger("player."+t,e)}return this},fire:function(t,e){return this.trigger(t,e,!1)},bind:function(){return Main.on("player.state",this,!0,function(t,e,i){e&&this.trigger(e,i)}).on("player.buffering player.paused",this,!0,function(t){this.osd.state.set(t.namespace)}).on("player.playing player.stopped player.ended",this,!0,function(){this.osd.state.reset()}).on("player.duration player.time player.seek player.hide player.error",this,!0,function(t,e){this.fire(t.namespace,[e])}).on("player.show player.resize",this,!0,function(t,e){this.fire(t.namespace,[e]).fire(e)}).on("destroy.player",this,!0,function(){this.destroy()}).on("resize.player",this,!0,function(){this.adapt()}),this},plays:!1,play:function(t,e,i,n,s){if(a&&(this.stop(!0===n,!1===s),t)){i&&this.preset(i);var r=!1;if(this.first("loaded",!0,this,function(){this.psize.set(!1,!0),this.audio.set(!1,!0),this.subtitles.set(!1,!0),r=!0}).first("playing",!0,this,function(){r||this.trigger("loaded")}),!1!==s&&this.show(),this.plays=a.play(t,e>0?e:0))return this.adapt().fire("play").plays}return!1},stop:function(t,e){var i=!1;return a&&this.plays&&(i=a.stop()),!1!==e?this.hide():this.osd.hide(),!1!==t&&this.off(),this.reset(),i},pause:function(t){return!!a&&!!this.plays&&a.pause(t)},seek:function(t){return!!(a&&this.plays&&(t+=a.pos||0)>=0&&a.seek(t))&&t},preset:function(t){return t&&("psize"in t&&this.psize.preset(t.psize),"audio"in t&&this.audio.preset(t.audio),"subtitle"in t&&this.subtitles.preset(t.subtitle)),this},psize:{mode:0,inited:!1,supports:function(){return b.supports("psize")},init:function(){return this.inited=this.inited||this.supports()&&a.psize.init()},preset:function(t){return!this.inited&&(t=parseInt(t))>this.mode&&(this.mode=t),this},get:function(){return!!this.supports()&&this.mode},set:function(t,e){if(e&&this.init()||this.inited){var i="fullscreen"==b.mode&&this.mode,n=a.psize.set(i);!1!==i&&(n?(this.mode=n.mode,t&&n.info&&b.osd.info.show(n.info)):this.mode=!1)}return this},reset:function(){return this.mode=0,this.inited&&(a.psize.reset(),this.inited=!1),this},next:function(){return!!this.inited&&(this.mode=!1===this.mode?0:this.mode+1,this.set(!0).mode)}},audio:{track:0,supports:function(){return b.supports("audio")},inited:!1,init:function(){return this.inited=this.inited||this.supports()&&a.audio.init()},preset:function(t){return!this.inited&&(t=parseInt(t))>this.track&&(this.track=t),this},get:function(){return!!this.supports()&&this.track},set:function(t,e){if(e&&this.init()||this.inited){var i=!1;0==a.audio.count()?t&&b.osd.info.show(Language.message(["audio","default"])):!1!==(i=a.audio.set(this.track))&&t&&b.osd.info.show(Language.message(["audio","track"])+": "+(i+1)),this.track=i}return this},reset:function(){return this.track=0,this.inited&&(a.audio.reset(),this.inited=!1),this},next:function(){return!!this.inited&&(this.track=!1===this.track?0:this.track+1,this.set(!0).track)}},subtitles:{track:-1,supports:function(){return b.supports("subtitles")},inited:!1,init:function(){return this.inited=this.inited||this.supports()&&a.subtitles.init()},preset:function(t){return!this.inited&&(t=parseInt(t))>this.track&&(this.track=t),this},get:function(){return!!this.supports()&&this.track},set:function(t,e){if(e&&this.init()||this.inited){var i=!1;0==a.subtitles.count()?t&&b.osd.info.show(Language.message(["subtitles","nothing"])):!1!==(i=a.subtitles.set(this.track))&&t&&b.osd.info.show(-1==i?Language.message(["subtitles","disabled"]):Language.message(["subtitles","track"])+": "+(i+1)),this.track=i}return this},reset:function(){return this.track=-1,this.inited&&(a.subtitles.reset(),this.inited=!1),this},next:function(){return!!this.inited&&(this.track=!1===this.track?0:this.track+1,this.set(!0).track)}},osd:{state:{phase:!1,set:function(t){return t?this.phase==t?this.adapt():(this.phase=t,this.show()):this.reset(),this},container:!1,show:function(){if(b.visible()&&this.hide().phase){var t;switch(this.phase){case"buffering":break;case"paused":t="paused.png"}this.container=jQuery('<div class="state '+this.phase+'">'+(t?'<img src="resources/images/osd/'+t+'" />':"")+"</div>").appendTo("#osd"),this.adapt()}return this},hide:function(){return this.container&&(this.container.remove(),this.container=!1),this},adapt:function(){if(this.container){var t=b.offset();t?t.height>0&&this.container.hide().css(t).css("line-height",t.height+"px").show():this.hide()}else this.phase&&this.show();return this},reset:function(){return this.hide().phase=!1,this}},info:{show:function(t){return OSD.info.show(t)},hide:function(){return OSD.info.hide()}},show:function(){return this.state.show(),this},hide:function(){return this.info.hide(),this.state.hide(),this},adapt:function(){return this.state.adapt(),this}},visible:function(t){return!!(a&&a.visible())&&(!t||this.mode==t)},show:function(){return this.visible()||(a.show(),this.osd.show()),this},hide:function(){return this.visible()&&(a.hide(),this.osd.hide()),this},toggle:function(t){return!0!==t&&!1!==t&&(t=this.plays),t?this.show():this.hide()},reset:function(){return this.psize.reset(),this.audio.reset(),this.subtitles.reset(),this.plays=!1,this}}),Timezone=a={local:function(){return-(new Date().getTimezoneOffset()/60)||0},custom:!1,init:function(){this.custom=(!!(this.custom=Storage.device.get("tz"))||0===this.custom)&&this.custom},offset:function(t){return"c"==t&&!1!==this.custom?3600*this.custom:3600*this.local()},get:function(){return!1!==this.custom?this.custom:this.local()},set:function(t){return t===this.custom||(!1===t?(Storage.device.remove("tz"),!(this.custom=t)):!!((0===t||t<=12&&t>=-12)&&Storage.device.set("tz",this.custom=t)))},choose:function(){var t=Proto.choose({title:["timezone","choose"],value:a.custom,options:function(){for(var t=[{label:["timezone","default"],value:!1}],e=-12;e<=12;e+=1)t.push({label:"UTC "+(0==e?0:(e<0?"":"+")+e+":00"),value:e});return t},select:function(e){a.set(e)&&t.close()}});t.open()},helper:function(){Helper.prompt("timezone",["timezone","helper"],["timezone","dating"])}},Dating={time:!1,init:function(t){this.sync()&&this.start()&&t&&t()},bind:function(){var t,e;return Main.on("resume connected",this,!0,(t=!1,e=function(){t||(t=jQuery.timeout(this,500,function(){var i=this.stop().sync();i&&this.start(),t=!1,i||e.call(this)}))})),this},sync:function(){var t=!1;return jQuery.ajax({url:"datetime",context:this,async:!1,success:function(e){var i=this.parse(e.now);(t=i>0)&&(this.time=i)}}),t},timer:!1,start:function(){var t=!1;return this.stop().timer=jQuery.interval(this,1e3,function(){if(this.time){if(t){if(0==this.time.getMinutes()&&this.sync()){t=!1;return}}else this.time.getMinutes()>0&&(t=!0);this.time.setSeconds(this.time.getSeconds()+1)}}),this},stop:function(){return this.timer&&(clearInterval(this.timer),this.timer=!1),this},date:function(t){return"s"===t?this.parse(this.time):this.add(this.time,Timezone.offset("c")-Timezone.offset("l"))},days:{names:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],abbrs:["sun","mon","tue","wed","thu","fri","sat"]},month:["january","february","march","april","may","june","july","august","september","october","november","december"],parse:function(t){switch(t){case"l":case"s":return this.date(t);default:try{t=t.getTime()}catch(e){try{t=t.replace(/\-\./g,"/")}catch(i){try{t*=1e3}catch(n){}}}return new Date(t)}},same:function(t,e,i,n){return this.iso(t,i,n)==this.iso(e,i,n)},compare:function(t,e,i,n){return(t=this.parse(this.iso(t,i,n)))>(e=this.parse(this.iso(e,i,n)))?1:t<e?-1:t==e&&0},min:function(t,e,i,n){return Math.min(this.parse(this.iso(t,i,n)),this.parse(this.iso(e,i,n)))},prev:function(t){if(t=this.parse(t))return new Date(t.setDate(t.getDate()-1))},next:function(t){if(t=this.parse(t))return new Date(t.setDate(t.getDate()+1))},add:function(t,e){if(t=this.parse(t))return new Date(t.setTime(t.getTime()+1e3*e))},convert:function(t,e,i){if(t=this.parse(t)){if(e&&i)switch(e+"_"+i){case"l_s":return this.add(t,Timezone.offset("l")-Timezone.offset("c"));case"s_l":return this.add(t,Timezone.offset("c")-Timezone.offset("l"))}return t}},format:function(t,e){if((t=Language.message(["date",t],!0))&&(e=this.parse(e))){var i={Y:e.getFullYear(),y:e.getFullYear()%100,M:Language.message(["date",this.month[e.getMonth()]]),m:e.getMonth()+1,D:Language.message(["date",this.days.names[e.getDay()]]),d:e.getDate(),W:Language.message(["date",this.days.abbrs[e.getDay()]]),H:e.getHours(),h:e.getHours()%12||12,i:e.getMinutes(),s:e.getSeconds(),a:e.getHours()>=12?"pm":"am"};if(-1!=t.indexOf("%"))for(var n in i)t=t.replace("%"+n,jQuery.isNumeric(i[n])&&i[n]<=9?"0"+i[n]:i[n])}return t},iso:function(t,e,i){return this.format("%Y/%m/%d"+(e?" %H:%i"+(i?":%s":""):""),t)},range:function(t,e){if(t=this.parse(t)){var i=[t];if(e){if(!0===e)i=[].concat(this.prev(t),i,this.next(t));else if(jQuery.isArray(e)){if(e[0]>0)for(var n=0;n<e[0];n++)i=[].concat(this.prev(i[0]),i);if(e[1]>0)for(var n=0;n<e[1];n++)i=[].concat(i,this.next(i[i.length-1]))}}return i}}},Scenes=a={available:{},add:function(t){if(t&&t.name)return this.available[t.name]=t},prev:!1,opened:!1,open:function(t,e){if(t=this.available[t]||t){var i=function(){t.open(function(){a.opened=t,e&&e()})};this.opened?(this.opened.name!=t.name&&(this.prev=this.opened),this.close(this.opened,i)):i()}return this},close:function(t,e){var i=!1,t=t&&this.available[t]||t||this.opened;return t?(this.opened&&(i=this.opened.name==t.name),t.close(function(){i&&(a.opened=!1),e&&e()})):e&&e(),this},back:function(t){return this.prev&&this.open(this.prev,t),this},find:function(t){return jQuery((t?"#"+t:"")+".scene","#scenes")},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)},toggle:function(t){return jQuery("#scenes").css({left:t?"":"-100%"}),this}},Overlay=(a=0,{hide:function(){return a>0&&(a-=1),0==a&&jQuery("#overlay").hide(),this},show:function(){return a+=1,jQuery("#overlay").show(),this}}),OSD={info:{holded:!1,hold:function(t){return t&&(this.holded=t,this.hide(!0)),this},unhold:function(t){return this.holded=!1,t?this.show(t):this.hide()},container:!1,show:function(t,e){return this.hide(!1),t&&(this.container=jQuery('<div class="info">'+t+"</div>").appendTo("#osd"),e||(this.hiding=jQuery.timeout(this,3e3,this.hide))),this},hiding:!1,hide:function(t){return this.reset().container&&(this.container.remove(),this.container=!1),!1!==t&&this.holded&&this.show(this.holded,!0),this},reset:function(){return this.hiding&&(clearTimeout(this.hiding),this.hiding=!1),this}}},Legend={html:function(t){var e="";if(t=jQuery.isFunction(t)?t():t){for(var i in t)(jQuery.isFunction(t[i].enabled)?t[i].enabled():t[i].enabled)!==!1&&(e+='<div class="item'+(t[i].key?' clickable" data-key="'+t[i].key:"")+'"><span class="icon"><img src="resources/images/buttons/'+(t[i].icon||t[i].key||i)+'.png" /></span>'+(t[i].label?'<span class="label">'+Language.message(t[i].label)+"</span>":"")+"</div>");e&&(e='<div class="legend">'+e+"</div>")}return e},show:function(t){var e=!!t&&this.html(t);return e?(jQuery("#legend").html(e),this.toggle(!0)):this.hide(),this},hide:function(){return jQuery("#legend").hide().empty(),this},toggle:function(t){return jQuery("#legend")[t?"show":"hide"](),this}},Network=(a=!1,b=!0,c=Proto.alert(["network","disconnected"],["network","status"],{back:function(){Main.back()}}),{status:function(t){return(!0===t||!1===t)&&b!==t&&((b=t)?c.close():(c.open(),a=function(){Player.visible()&&(a=function(){Player.show(),a=!1},Player.hide())}),Main.trigger(b?"connected":"disconnected"),a&&a()),b}});Platform.add(Proto.platform("browser",{scaling:!0,detect:function(){return!0},keyset:{up:38,down:40,left:37,right:39,enter:13,back:27,info:73,prech:45,plus:221,minus:219,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:97,stop:98,pause:99,forward:33,backward:34}})),Platform.add(Proto.platform("opera",{scaling:!0,detect:function(){return navigator.userAgent.search(/(opera|opr)\//i)>=0}})),Platform.add(Proto.platform("hbbtv",{objects:{oipfAppMan:{type:"application/oipfApplicationManager"},oipfConfig:{type:"application/oipfConfiguration"}},detect:function(){return navigator.userAgent.search(/hbbtv\//i)>=0&&window.KeyEvent},init:function(t){var e,i=jQuery("#oipfAppMan")[0],n=!1,s=jQuery("#oipfConfig")[0],r=!1,a=511;try{e=i.getOwnerApplication(document),n=!0}catch(o){}if(n){try{e.show(),e.activate(),e.activateInput()}catch(u){}this.exit=function(){try{e.destroyApplication()}catch(t){window.close()}}}try{e.privateData.keyset.setValue(a),r=!0}catch(c){try{s.keyset.setValue(a),r=!0}catch(h){try{s.keyset.value=a,r=!0}catch(l){}}}n&&r&&t&&t()},keyset:function(){return Proto.keyset(KeyEvent)},player:function(){return Proto.player("cehtml")}})),Platform.add(Proto.platform("nettv",{detect:function(){return navigator.userAgent.search(/nettv\//i)>=0},player:function(){return Proto.player(navigator.userAgent.match(/nettv\/[1-3]\./i)?"cehtml":"html5")}})),Platform.add(Proto.platform("sta",{detect:function(){return navigator.userAgent.search(/smarttva|toshibatp/i)>=0},init:function(t){(a=!!window.SmartTvA_API&&SmartTvA_API)&&(this.exit=function(){try{a.exit()}catch(t){window.close()}}),t&&t()},player:function(){return Proto.player("html5",{supports:{psize:!0,audio:function(){return a&&a.hasCapability("Multiaudio")},subtitles:!1}})}})),Platform.add(Proto.platform("mag",{history:!1,detect:function(){return!!window.gSTB&&(this.vgs(),!0)},vmode:!1,vgs:function(){var t=!1;(this.vmode=gSTB.RDir("vmode"))&&-1==this.vmode.indexOf("720")&&-1==this.vmode.indexOf("1080")&&(gSTB.ExecAction("tvsystem 720p-50"),t=!0),-1==gSTB.RDir("gmode").indexOf("1280")&&(gSTB.ExecAction("graphicres 1280"),t=!0),t?gSTB.ExecAction("reboot"):(gSTB.SetBrightness(127),gSTB.SetContrast(-27),gSTB.SetSaturation(100))},storage:function(){return{get:function(t){return gSTB.LoadUserData(t)},set:function(t,e){gSTB.SaveUserData(t,e)},remove:function(t){gSTB.SaveUserData(t,"")}}},init:function(t){var e,i=!1,n=(e=gSTB.GetVolume(),{muted:function(){return gSTB.GetMute()},mute:function(){return gSTB.SetMute(1),this},unmute:function(){return gSTB.SetMute(0),this},get:function(){return e},move:function(t){return(e+=t)<0&&(e=0),e>100&&(e=100),gSTB.SetVolume(e),this}});jQuery(document).on("keydown",function(t){var e=t.keyCode||t.which;switch(e){case 107:case 109:OSD.info.unhold(Language.message(["audio","volume"])+": "+n.unmute().move(107==e?1:-1).get());break;case 192:n.muted()?OSD.info.unhold(Language.message(["audio","volume"])+": "+n.unmute().get()):(n.mute(),OSD.info.hold(Language.message(["audio","muted"])));break;case 85:(i=!i)?Main.status(!1):Main.status(!0),gSTB.StandBy(i);break;case 9:Navi.trigger(t.shiftKey?"chdown":"chup")}}),jQuery.interval(!1,1e3,function(){Network.status(gSTB.GetLanLinkStatus()||gSTB.GetWifiLinkStatus())}),gSTB.SetMute(0),gSTB.SetTopWin(0),gSTB.EnableVKButton(!1),gSTB.EnableServiceButton(!1),gSTB.EnableAppButton(!1),t&&t()},duid:function(){return gSTB.GetDeviceSerialNumber()},keyset:{up:38,down:40,left:37,right:39,enter:13,back:8,info:89,prech:116,pup:33,pdown:34,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:82,stop:83,forward:70,backward:66,exit:27,psize:117,audio:71},player:function(){var _0x33f24d=Platform.option("solution")||"auto",_0x5d10bd=-1==this.vmode.indexOf("1080")?1:1.5,_0xa6153c=Proto.player({supports:{psize:!0,audio:!0,subtitles:!0},create:function(){return jQuery.create("div",!1,{style:"visibility: hidden; background: transparent; position: absolute;"})},prepare:function(){gSTB.InitPlayer(),gSTB.SetUserFlickerControl(1),gSTB.SetDefaultFlicker(1),window.stbEvent={event:0,onEvent:function(t){switch(t){case"1":_0xa6153c.tick(!1),_0xa6153c.state("ended",[_0xa6153c.duration>_0xa6153c.pos?_0xa6153c.duration:_0xa6153c.pos]);break;case"2":!1===_0xa6153c.duration&&(_0xa6153c.pos>0&&gSTB.SetPosTime(_0xa6153c.pos),_0xa6153c.trigger("duration",[_0xa6153c.duration=Math.ceil(gSTB.GetMediaLenEx()/1e3)||0],"loaded"));break;case"4":_0xa6153c.tick(!0);break;case"5":_0xa6153c.tick(!1),_0xa6153c.trigger("error");break;case"32":Main.status(!0);break;case"33":Main.status(!1)}}}},destroy:function(){gSTB.DeinitPlayer()},play:function(t,e){return this.stop(),!!t&&(e>0&&(this.pos=e),gSTB.Play(-1==t.indexOf(" ")?(t.indexOf("m3u8")>0?"ffmpeg":_0x33f24d)+" "+t:t),this.trigger("play",[t,e],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(gSTB.Stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){return!!this.plays&&!!this.playing&&(t?(gSTB.Pause(),this.paused=!0,this.state("paused")):(gSTB.Continue(),this.paused=!1,this.state("playing")),this.paused)},seek:function(t){return!!this.plays&&!!this.playing&&this.duration>0&&t>=0&&t<=this.duration&&(gSTB.SetPosTime(t),this.trigger("seek",[this.pos=t]),this.tick(!1,"buffering"),!0)},audio:{tracks:!1,track:!1,inited:!1,init:function(){if(!this.inited){var _0x4a4eca;try{_0x4a4eca=eval(gSTB.GetAudioPIDs())}catch(a){return!1}_0x4a4eca&&_0x4a4eca.length&&(this.tracks=_0x4a4eca)}return this.inited=!0},count:function(){return this.tracks?this.tracks.length:0},set:function(t){var e=!1;return this.inited&&this.tracks&&(t>=this.tracks.length&&(t=0),!1!==this.track&&this.track==t?e=t:t in this.tracks&&(gSTB.GetAudioPID()==this.tracks[t].pid||gSTB.SetAudioPID(this.tracks[t].pid),this.track=e=t)),e},reset:function(){this.tracks=this.track=this.inited=!1}},subtitles:{tracks:!1,track:!1,inited:!1,init:function(){if(!this.inited){var _0x1deb61;try{_0x1deb61=eval(gSTB.GetSubtitlePIDs())}catch(a){return!1}_0x1deb61&&_0x1deb61.length&&(this.tracks=_0x1deb61)}return this.inited=!0},count:function(){return this.tracks?this.tracks.length:0},set:function(t){var e=!1;return this.inited&&this.tracks&&(t>=this.tracks.length?this.track=e=-1:!1!==this.track&&this.track==t?e=t:t in this.tracks&&(gSTB.GetSubtitlePID()==this.tracks[t].pid||gSTB.SetSubtitlePID(this.tracks[t].pid),this.track=e=t),gSTB.SetSubtitles(-1!=e&&!1!==e)),e},reset:function(){gSTB.SetSubtitles(this.tracks=this.track=this.inited=!1)}},cover:!1,adapt:function(){this.offset(function(t){gSTB.SetViewport(t.width*_0x5d10bd,t.height*_0x5d10bd,t.left*_0x5d10bd,t.top*_0x5d10bd)})}});return _0xa6153c},exit:function(){window.location="file:///home/web/index.html"}})),Platform.add(Proto.platform("dune",{history:!1,objects:{duneStbApi:{type:"application/x-dune-stb-api"}},detect:function(){return navigator.userAgent.search(/dune|arora/i)>=0},storage:function(){return{get:function(t){return _0x137552.getUserSetting(t)},set:function(t,e){_0x137552.setUserSetting(t,e)},remove:function(t){_0x137552.setUserSetting(t,"")}}},init:function(_0x31e8bf){if((_0x137552=jQuery("#duneStbApi")[0])&&_0x137552.init()){var a,_0x1c3439=!1,_0x51c2a0=(a=_0x137552.getVolume(),{muted:function(){return _0x137552.isMuteEnabled()},mute:function(){return _0x137552.enableMute(),this},unmute:function(){return _0x137552.disableMute(),this},get:function(){return a},move:function(t){return(a+=t)<0&&(a=0),a>100&&(a=100),_0x137552.setVolume(a),this}});jQuery(document).on("keydown",function(t){var e=t.keyCode;switch(e){case 174:case 175:OSD.info.unhold(Language.message(["audio","volume"])+": "+_0x51c2a0.unmute().move(175==e?1:-1).get());break;case 173:_0x51c2a0.muted()?OSD.info.unhold(Language.message(["audio","volume"])+": "+_0x51c2a0.unmute().get()):(_0x51c2a0.mute(),OSD.info.hold(Language.message(["audio","muted"])));break;case 252:case 220:(_0x1c3439=!_0x1c3439)?Main.status(!1):Main.status(!0),_0x137552.setStandbyMode(_0x1c3439?_0x137552.STANDBY_MODE_ON:_0x137552.STANDBY_MODE_OFF)}}),jQuery.interval(!1,1e3,function(){var _0x78788c,_0x37c443=!1;try{_0x78788c=eval(_0x137552.getNetworkStatus())}catch(a){}if(_0x78788c){for(var _0xfc2d30 in _0x78788c)if(1===_0x78788c[_0xfc2d30].running){_0x37c443=!0;break}}Network.status(_0x37c443)}),window.onunload=function(){_0x137552.deinit()},_0x137552.disableMute(),_0x137552.disableVideoOnTop(),_0x31e8bf&&_0x31e8bf()}},duid:function(){return _0x137552.getSerialNumber()},keyset:{up:38,down:40,left:37,right:39,enter:13,back:8,info:199,prech:12,pup:33,pdown:34,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:250,pause:19,stop:178,forward:205,backward:204,exit:200,psize:251,audio:207,subtitles:206},player:function(){var _0x4e9fae=Proto.player({supports:{psize:!0,audio:!0,subtitles:!0},create:function(){return jQuery.create("div",!1,{style:"visibility: hidden; background: transparent; position: absolute;"})},prepare:function(){_0x137552.setPlaybackEventCallback(function(t,e,i){switch(e){case 3:!1===_0x4e9fae.duration&&_0x4e9fae.trigger("duration",[_0x4e9fae.duration=_0x137552.hasLength()?_0x137552.getLengthInSeconds():0]),_0x4e9fae.tick(!0);break;case 6:_0x4e9fae.tick(!1,"buffering");break;case 7:_0x4e9fae.tick(!1),_0x4e9fae.state("ended",[_0x4e9fae.duration>_0x4e9fae.pos?_0x4e9fae.duration:_0x4e9fae.pos])}})},play:function(t,e){return this.stop(),!!t&&(e>0&&_0x137552.setInitialPositionInSeconds(this.pos=e),0===_0x137552.play(t+(t.indexOf("m3u8")>0&&-1==t.indexOf("protocol:hls")?(-1==t.indexOf("dune_params")?"|||dune_params|||":",")+"protocol:hls":"")))&&(this.trigger("play",[t,e],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(_0x137552.stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){return!!this.plays&&!!this.playing&&(t?0===_0x137552[_0x137552.canPause()?"pause":"stop"]()&&(this.paused=!0,this.state("paused")):0===_0x137552.resume()&&(this.paused=!1,this.state("playing")),this.paused)},seek:function(t){return!!this.plays&&!!this.playing&&this.duration>0&&t>=0&&t<=this.duration&&0===_0x137552.setPositionInSeconds(t)&&(this.trigger("seek",[this.pos=t]),!0)},audio:{total:!1,inited:!1,init:function(){if(!this.inited){var _0x52df1;try{_0x52df1=eval(_0x137552.getAudioTracksDescription()).length}catch(a){return!1}_0x52df1>0&&(this.total=_0x52df1)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=0),0===_0x137552.setAudioTrack(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},subtitles:{total:!1,inited:!1,init:function(){if(!this.inited){var _0x5dcbb0;try{_0x5dcbb0=eval(_0x137552.getSubtitleTracksDescription()).length}catch(a){return!1}_0x5dcbb0>0&&(this.total=_0x5dcbb0)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total?0===_0x137552.disableSubtitleTrack()&&(e=-1):0===_0x137552.setSubtitleTrack(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},cover:!1,adapt:function(){this.offset(function(t){_0x137552.setWindowRect(t.left,t.top,t.width,t.height)})}});return _0x4e9fae},exit:function(){_0x137552.exitBrowser(_0x137552.EXIT_BROWSER_MODE_CLOSE)}})),Platform.add(Proto.platform("tvip",{history:!1,detect:function(){return navigator.userAgent.search(/tvip/i)>=0&&window.TvipStb&&window.TvipPlayer&&window.TvipEvent},storage:function(){return{get:function(t){return TvipStb.getEnvValue(t)},set:function(t,e){TvipStb.setEnvValue(t,e)},remove:function(t){TvipStb.setEnvValue(t,"")}}},init:function(t){TvipStb.reset(),jQuery(document).on("keydown",function(t){9==t.keyCode&&Navi.trigger(t.shiftKey?"pdown":"pup")}),TvipEvent.onSystemEvent=function(t){switch(t){case"onpause":case"onresume":case"cec_sleep":case"cec_wake":Main.status("onresume"==t||"cec_wake"==t)}},t&&t()},duid:function(){return TvipStb.getMainMacAddress().replace(/\:/g,"")},keyset:{up:38,down:40,left:37,right:39,enter:13,back:27,info:89,prech:117,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:82,stop:83,forward:70,backward:66},player:function(){var t,e=TvipStb.getDisplayMode(),i=-1!=e.indexOf("1080")?1.5:-1==e.indexOf("720")?.8:1,n=Proto.player({supports:{psize:!0,audio:!0,subtitles:function(){return"setCurrentSubtitleStreamIndex"in TvipPlayer}},create:function(){return jQuery.create("div",!1,{style:"visibility: hidden; background: transparent; position: absolute;"})},prepare:function(){TvipPlayer.reset(),TvipEvent.onPlayerStateChange=function(t,e){switch(e){case 1:case 2:case 4:case 10:n.tick(!1,"buffering");break;case 3:if(!1===n.duration){var i=TvipPlayer.getMinPositionMsec();n.pos>0&&TvipPlayer.seek(i+1e3*n.pos),n.trigger("duration",[n.duration=Math.ceil((TvipPlayer.getMaxPositionMsec()-i)/1e3)||0],"loaded")}break;case 5:n.tick(!0);break;case 6:n.tick(!1),n.state("ended",[n.duration>n.pos?n.duration:n.pos]);break;case 11:n.tick(!1),n.trigger("error")}}},play:(t=Platform.option("mode")||"",function(e,i){return this.stop(),!!e&&(i>0&&(this.pos=i),TvipPlayer.playUrl(e,t),this.trigger("play",[e,i],"buffering"),this.plays=!0)}),stop:function(){return!!this.plays&&(TvipPlayer.stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){if(this.plays&&this.playing){var e=this.duration>0;return t?(TvipPlayer[e?"pause":"stop"](),this.paused=!0,this.state("paused")):e&&(TvipPlayer.unpause(),this.paused=!1,this.state("playing")),this.paused}return!1},seek:function(t){return!!this.plays&&!!this.playing&&this.duration>0&&t>=0&&t<=this.duration&&(TvipPlayer.seek(TvipPlayer.getMinPositionMsec()+1e3*t),this.trigger("seek",[this.pos=t]),!0)},audio:{tracks:!1,inited:!1,init:function(){if(!this.inited){var t=TvipPlayer.getStreamsCount();if(t>0){for(var e=[],i=0,n=0;n<t;n++)"a"==TvipPlayer.getStreamInfo(n).type&&(e[i]=n,i+=1);e.length&&(this.tracks=e)}}return this.inited=!0},count:function(){return this.tracks?this.tracks.length:0},set:function(t){var e=!1;return this.inited&&this.tracks&&(t>=this.tracks.length&&(t=0),t in this.tracks&&(TvipPlayer.setCurrentAudioStreamIndex(this.tracks[t]),e=t)),e},reset:function(){this.tracks=this.inited=!1}},subtitles:{tracks:!1,inited:!1,init:function(){if(!this.inited){var t=TvipPlayer.getStreamsCount();if(t>0){for(var e=[],i=0,n=0;n<t;n++)"s"==TvipPlayer.getStreamInfo(n).type&&(e[i]=n,i+=1);e.length&&(this.tracks=e)}}return this.inited=!0},count:function(){return this.tracks?this.tracks.length:0},set:function(t){var e=!1;return this.inited&&this.tracks&&(t>=this.tracks.length&&(t=-1),(t in this.tracks||-1==t)&&(TvipPlayer.setCurrentSubtitleStreamIndex(-1==t?0:this.tracks[t]),e=t)),e},reset:function(){this.tracks=this.inited=!1}},cover:!1,adapt:function(){this.offset(function(t){TvipPlayer.setVideoWindow(t.left*i,t.top*i,t.width*i,t.height*i,!1)})}});return n}})),Platform.add(Proto.platform("inext",{history:!1,js:["http://127.0.0.1/stb_api.js"],detect:function(){return navigator.userAgent.search(/realpilot|inext/i)>=0},init:function(t){(iNext=!!window.sekator_stb&&new sekator_stb)&&t&&t()},duid:function(){return iNext.RDir("SerialNumber").replace(/\./g,"")},keyset:{up:38,down:40,left:37,right:39,enter:13,back:81,info:82,prech:187,plus:79,minus:80,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:32,stop:67,forward:65,backward:66},player:function(){var t=Proto.player({supports:{psize:!0,audio:!0,subtitles:!1},create:function(){return jQuery.create("video",!1,{id:"sekator_video",style:this.style})},prepare:function(){iNext.setCallBackPlayer(function(e){switch(e){case"LOADFAILED":case"FATALERROR":t.tick(!1),t.trigger("error");break;case"LOADING":t.tick(!1,"buffering");break;case"PLAYING":case"LOADSUCCEED":!1===t.duration&&(t.pos>0&&iNext.SetPosTime(t.pos),t.trigger("duration",[t.duration=Number(iNext.GetMediaLen())||0])),t.paused?t.state("paused"):t.tick(!0),t.zoom();break;case"COMPLETED":t.tick(!1),t.state("ended",[t.duration>t.pos?t.duration:t.pos])}})},play:function(t,e){return this.stop(),!!t&&(e>0&&(this.pos=e),iNext.Play(t),this.trigger("play",[t,e],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(iNext.Stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){return!!this.plays&&!!this.playing&&(t?(iNext.Pause(),this.paused=!0,this.state("paused")):(iNext.Continue(),this.paused=!1,this.state("playing")),this.paused)},seek:function(t){return!!this.plays&&!!this.playing&&this.duration>0&&t>=0&&t<=this.duration&&(iNext.SetPosTime(t),this.trigger("seek",[this.pos=t]),!0)},audio:{total:!1,inited:!1,init:function(){if(!this.inited){var t=iNext.GetAudioPIDs().split("\n").length-1;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=0),iNext.SetAudioPID(t),e=t),e},reset:function(){this.total=this.inited=!1}},zoom:function(){iNext.setZoom(3)},adapt:function(){this.plays&&jQuery.timeout(this,100,this.zoom)}});return t},exit:function(){iNext.exitToApps()}})),Platform.add(Proto.platform("tizen",{history:!1,viewport:!0,scaling:!0,js:["$WEBAPIS/webapis/webapis.js"],detect:function(){return navigator.userAgent.search(/tizen/i)>=0&&window.tizen},init:function(t){var e={unregister:["VolumeDown","VolumeUp","VolumeMute","Tools"],register:["ChannelUp","ChannelDown","0","1","2","3","4","5","6","7","8","9","MediaPlay","MediaStop","MediaPause","MediaPlayPause","MediaRewind","MediaFastForward","Info","PreviousChannel","PictureSize","ChannelList","Guide","E-Manual"]};for(var i in e)for(var n in e[i])try{e[i][n]&&tizen.tvinputdevice[i+"Key"](e[i][n])}catch(s){}webapis.network.addNetworkStateChangeListener(function(t){(4==t||5==t)&&Network.status(4==t)}),webapis.appcommon.setScreenSaver(0),t&&t()},duid:function(){try{return webapis.productinfo.getDuid()}catch(t){return console.log("Не вдалося отримати DUID, використано значення за замовчуванням."),"default-duid-value12"}},keyset:{up:38,down:40,left:37,right:39,enter:13,back:10009,info:457,prech:10190,plus:427,minus:428,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:[415,19,10252],stop:413,forward:417,backward:412,psize:10140},player:function(){var t=1,e=Proto.player({supports:{psize:!0,audio:!0,subtitles:!1},create:function(){return jQuery.create("object",!1,{type:"application/avplayer",style:this.style})},prepare:function(){try{tizen.systeminfo.getPropertyValue("DISPLAY",function(e){t=e.resolutionWidth/1280})}catch(e){return!1}},buffers:{timeout:3,inited:!1,init:function(){if(!this.inited){var t=Platform.option("buffering");t&&t.timeout&&(t.timeout=parseInt(t.timeout),t.timeout>0&&(this.timeout=t.timeout))}return this.inited=!0},set:function(){if(this.init())try{webapis.avplay.setTimeoutForBuffering(1e3*this.timeout)}catch(t){}}},play:function(t,i){if(this.stop(),t){try{webapis.avplay.open(t),this.buffers.set(),webapis.avplay.setListener({onbufferingstart:function(){e.tick(!1,"buffering")},onbufferingcomplete:function(){e.paused&&e.state("paused")},oncurrentplaytime:function(t){t>0&&(!1===e.duration&&e.trigger("duration",[e.duration=Math.ceil(webapis.avplay.getDuration()/1e3)||0]),e.playing||e.tick(!0))},onstreamcompleted:function(){e.tick(!1),e.state("ended",[e.duration>e.pos?e.duration:e.pos])},onerror:function(){e.tick(!1),e.trigger("error")}}),webapis.avplay.setDisplayMethod("PLAYER_DISPLAY_MODE_FULL_SCREEN"),webapis.avplay.prepareAsync(function(){i>0&&webapis.avplay.seekTo(1e3*(e.pos=i)),webapis.avplay.play()}),this.trigger("play",[t,i],"buffering"),this.plays=!0}catch(n){}return this.plays}return!1},stop:function(){if(this.plays){try{webapis.avplay.stop(),webapis.avplay.close()}catch(t){}return this.trigger("stop",[this.pos],"stopped"),this.reset(),!0}return!1},pause:function(t){if(this.plays&&this.playing){try{t?(webapis.avplay.pause(),this.paused=!0,this.state("paused")):(webapis.avplay.play(),this.paused=!1,this.state("playing"))}catch(e){}return this.paused}return!1},seek:function(t){if(this.plays&&this.playing&&this.duration>0&&t>=0&&t<=this.duration)try{return webapis.avplay.seekTo(1e3*t),this.trigger("seek",[this.pos=t]),!0}catch(e){}return!1},audio:{tracks:!1,inited:!1,init:function(){if(!this.inited){var t;try{t=webapis.avplay.getTotalTrackInfo()}catch(e){return!1}if(t){var i=[],n=0;for(var s in t)"AUDIO"==t[s].type&&(i[n]=t[s].index,n+=1);i.length&&(this.tracks=i)}}return this.inited=!0},count:function(){return this.tracks?this.tracks.length:0},set:function(t){var e=!1;if(this.inited&&this.tracks&&(t>=this.tracks.length&&(t=0),t in this.tracks))try{webapis.avplay.setSelectTrack("AUDIO",this.tracks[t]),e=t}catch(i){}return e},reset:function(){this.tracks=this.inited=!1}},adapt:function(){this.plays&&this.offset(function(e){try{webapis.avplay.setDisplayRect(e.left*t,e.top*t,e.width*t,e.height*t)}catch(i){}})}});return e},exit:function(){try{tizen.application.getCurrentApplication().exit()}catch(t){window.close()}}})),Platform.add(Proto.platform("maple",{history:!1,scaling:!0,js:["$MANAGER_WIDGET/Common/API/Widget.js","$MANAGER_WIDGET/Common/API/TVKeyValue.js","$MANAGER_WIDGET/Common/API/Plugin.js"],detect:function(){if(navigator.userAgent.search(/maple/i)>=0){var t={pluginObjectSef:"SAMSUNG-INFOLINK-SEF",pluginObjectTVMW:"SAMSUNG-INFOLINK-TVMW",pluginObjectNetwork:"SAMSUNG-INFOLINK-NETWORK",pluginObjectNNavi:"SAMSUNG-INFOLINK-NNAVI"};for(var e in t){var i=document.createElement("object");i.setAttribute("id",e),i.setAttribute("classid","clsid:"+t[e]),i.setAttribute("style","position: absolute; visibility: hidden; display: block; background: none; width: 0; height: 0;");try{document.body.appendChild(i)}catch(n){document.write('<object id="'+e+'" classid="'+i.getAttribute("classid")+'" style="'+i.getAttribute("style")+'"></object>')}}return!0}return!1},storage:function(){if(window.FileSystem){var t,e,i=new FileSystem,n=curWidget.id,s=function(t){return i.openCommonFile(n+".db",t)},r=function(){e&&i.closeCommonFile(e)},a=function(i){(e=s("w"))&&(e.writeAll(i?"":jQuery.toJSON(t)),r())};if(function(){if(!t&&(i.isValidCommonPath(n)||i.createCommonDir(n))&&((e=s("r+"))&&(t=e.readAll(),r()),t))try{t=jQuery.parseJSON(t)}catch(a){}return t=t||{}}())return{get:function(e){return t[e]},set:function(e,i){t[e]=i,a()},remove:function(e){delete t[e],a()}}}return Proto.storage()},init:function(t){var e=new Common.API.Widget,i=new Common.API.Plugin,n=jQuery("#pluginObjectNNavi")[0],s=jQuery("#pluginObjectNetwork")[0],r=new Common.API.TVKeyValue,a=!1,o=function(){a||(jQuery.interval(!1,1e3,function(){try{Network.status(1==s.CheckPhysicalConnection(1)||1==s.CheckPhysicalConnection(0))}catch(t){}}),u(),a=!0)},u=function(){try{i.unregistKey(r.KEY_VOL_UP),i.unregistKey(r.KEY_VOL_DOWN),i.unregistKey(r.KEY_MUTE),i.unregistKey(r.KEY_TOOLS),i.SetBannerState(1),n.SetBannerState(1),i.setOffScreenSaver(),i.setOffIdleEvent()}catch(t){}};this.duid=function(){return"function"==typeof n.GetDUID&&s.GetMAC?n.GetDUID(s.GetMAC()):"12514214-124121-1243124-12412412312124123"},this.keyset=function(){return{up:r.KEY_UP,down:r.KEY_DOWN,left:r.KEY_LEFT,right:r.KEY_RIGHT,enter:r.KEY_ENTER,back:r.KEY_RETURN,info:r.KEY_INFO,prech:r.KEY_PRECH,plus:r.KEY_CH_UP,minus:r.KEY_CH_DOWN,n0:r.KEY_0,n1:r.KEY_1,n2:r.KEY_2,n3:r.KEY_3,n4:r.KEY_4,n5:r.KEY_5,n6:r.KEY_6,n7:r.KEY_7,n8:r.KEY_8,n9:r.KEY_9,play:r.KEY_PLAY,stop:r.KEY_STOP,pause:r.KEY_PAUSE,forward:r.KEY_FF,backward:r.KEY_RW,exit:r.KEY_EXIT,psize:r.KEY_ASPECT}},this.back=function(){this.exit(!0)},this.exit=function(t){jQuery.timeout(e,500,function(){t?this.sendReturnEvent():this.sendExitEvent()})},window.onPause=function(){Main.status(!1)},window.onResume=function(){u(),Main.status(!0)},jQuery.timeout(!1,2e3,window.onShow=function(){o()}),e.sendReadyEvent(),t&&t()},player:function(){var t=jQuery("#pluginObjectSef")[0],e=Proto.player({supports:{psize:!0,audio:!0,subtitles:!1},create:function(){return t},prepare:function(){window.OnPlayerEvent=function(i,n){switch(i){case 1:case 2:case 3:case 4:case 6:e.tick(!1),e.trigger("error");break;case 7:e.paused&&t.Execute("Pause");break;case 8:e.tick(!1),e.state("ended",[e.duration>e.pos?e.duration:e.pos]);break;case 9:!1===e.duration&&e.trigger("duration",[e.duration=Math.ceil(t.Execute("GetDuration")/1e3)||0],"loaded");break;case 11:e.tick(!1,"buffering");break;case 12:e.paused?e.state("paused"):e.tick(!0)}},t.Open("Player","0001","InitPlayer"),t.OnEvent="OnPlayerEvent"},destroy:function(){t.Close()},buffers:{inited:!1,initial:0,pending:0,init:function(){if(!this.inited){var t=Platform.option("buffers");t&&(t.initial&&(t.initial=parseInt(t.initial),t.initial>0&&(this.initial=t.initial)),t.pending&&(t.pending=parseInt(t.pending),t.pending>0&&(this.pending=t.pending)))}return this.inited=!0},set:function(){this.init()&&(this.initial>0&&t.Execute("SetInitialBuffer",1024*this.initial),this.pending>0&&t.Execute("SetPendingBuffer",1024*this.pending))}},play:function(e,i){return this.stop(),!!(e&&(t.Execute("InitPlayer",e+(e.indexOf("m3u8")>0&&-1==e.indexOf("COMPONENT=HLS")?"|COMPONENT=HLS":"")),this.buffers.set(),t.Execute("StartPlayback",this.pos=i>0?i:0)))&&(this.trigger("play",[e,i],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(t.Execute("Stop"),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(e){return!!this.plays&&!!this.playing&&(e?t.Execute("Pause")&&(this.paused=!0,this.state("paused")):t.Execute("Resume")&&(this.paused=!1,this.state("playing")),this.paused)},seek:function(e){if(this.plays&&this.playing&&this.duration>0&&e>=0&&e<=this.duration){var i=e-this.pos,n=!1;if(n=i<0?t.Execute("JumpBackward",-i):t.Execute("JumpForward",i))return this.trigger("seek",[this.pos=e]),!0}return!1},audio:{total:!1,inited:!1,init:function(){if(!this.inited){var e=t.Execute("GetTotalNumOfStreamID",1)||0;e>0&&e<100?this.total=e:0==t.Execute("GetCurrentStreamID",1)&&t.Execute("GetStreamLanguageInfo",1,0)>0&&(this.total=1)}return this.inited=!0},count:function(){return this.total||0},set:function(e){var i=!1;return this.inited&&this.total>0&&(e>=this.total&&(e=0),(t.Execute("GetCurrentStreamID",1)==e||1==t.Execute("SetStreamID",1,e))&&(i=e)),i},reset:function(){this.total=this.inited=!1}},adapt:function(){this.offset(function(e){t.Execute("SetDisplayArea",.75*e.left,.75*e.top,.75*e.width,.75*e.height)})}});return e}})),Platform.add(Proto.platform("lg",{scaling:!0,netcast:!1,web0s:!1,detect:function(){return(this.netcast=navigator.userAgent.search(/netcast|simplesmart.tv-2016/i)>=0)?(this.name="netcast",this.history=!1,this.objects={netCastInfo:{type:"application/x-netcast-info"}}):(this.web0s=navigator.userAgent.search(/web0s/i)>=0)&&(this.name="web0s"),this.netcast||this.web0s},duid:function(){var t;return this.netcast&&(t=jQuery("#netCastInfo")[0].serialNumber),t||Proto.platform("lg").duid()},keyset:{up:38,down:40,left:37,right:39,enter:13,back:461,info:457,plus:33,minus:34,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,play:415,stop:413,pause:19,forward:417,backward:412},player:function(){return Proto.player(this.netcast?"cehtml":"html5")},back:function(){window.NetCastBack?NetCastBack():window.PalmSystem&&PalmSystem.platformBack?PalmSystem.platformBack():this.exit()},exit:function(){window.NetCastExit?NetCastExit():window.close()}})),Platform.add(Proto.platform("sandroid",{scaling:!0,viewport:function(){var t=1/window.devicePixelRatio;return"width=device-width, user-scalable=no, initial-scale="+t+", minimum-scale="+t+", maximum-scale="+t+", target-densitydpi=device-dpi"},detect:function(){return navigator.userAgent.search(/sandroid/i)>=0&&window.sandroid&&window.device&&window.player&&window.display},init:function(t){device.OnEvent=function(t){switch(t){case 1:case 3:Main.status(!0);break;case 2:case 4:Main.status(!1);break;case 5:Network.status(!0);break;case 6:Network.status(!1)}},device.OnKey=function(t){Navi.trigger(t)},"ShowMenu"in sandroid&&(this.menu=function(){sandroid.ShowMenu()}),t&&t()},duid:function(){return device.GetSerial()},keyset:{up:38,down:40,left:37,right:39,enter:13,back:27,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57},player:function(){var t=Proto.player({ratio:!1,scale:!1,supports:{psize:!0,audio:!0,subtitles:function(){return"IsSubtitlesSupported"in player&&player.IsSubtitlesSupported()}},create:!1,prepare:function(){if(!this.vgs())return!1;player.OnEvent=function(e){switch(e){case 1:t.state("loaded");break;case 2:t.tick(!1,"buffering");break;case 3:case 4:!1===t.duration&&(t.pos>0&&player.Seek(1e3*t.pos),t.trigger("duration",[t.duration=Math.ceil(player.GetDuration()/1e3)||0])),t.paused?t.state("paused"):t.tick(!0);break;case 5:t.tick(!1),t.state("ended",[t.duration>t.pos?t.duration:t.pos]);break;case 6:t.tick(!1),t.trigger("error")}}},destroy:!1,vgs:function(){var t=display.GetResolution().split("|");return t[0]>0&&t[1]>0&&(this.scale={x:t[0]/1280,y:t[1]/720},this.ratio=t[0]/t[1]),this.ratio},play:function(t,e){return this.stop(),!!t&&(e>0&&(this.pos=e),player.Play(t),this.trigger("play",[t,e],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(player.Stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){return!!this.plays&&!!this.playing&&(t?(player.Pause(),this.paused=!0,this.state("paused")):(player.Continue(),this.paused=!1,this.state("playing")),this.paused)},seek:function(t){return!!this.plays&&!!this.playing&&this.duration>0&&t>=0&&t<=this.duration&&(player.Seek(1e3*t),this.trigger("seek",[this.pos=t]),!0)},psize:{inited:!1,init:function(){return this.inited=!0},set:function(e,i){var n,s=!1,r=1280,a=720;if(this.inited&&!1!==e){switch(e){case 4:n="21:9",t.ratio<2.33?a=r*t.scale.x/2.33/t.scale.y:r=a*t.scale.y*2.33/t.scale.x;break;case 3:n="18:9",t.ratio<2?a=r*t.scale.x/2/t.scale.y:r=a*t.scale.y*2/t.scale.x;break;case 2:n="14:9",t.ratio<1.55?a=r*t.scale.x/1.56/t.scale.y:r=a*t.scale.y*1.56/t.scale.x;break;case 1:n="4:3",t.ratio<1.33?a=r*t.scale.x/1.33/t.scale.y:r=a*t.scale.y*1.33/t.scale.x;break;default:e=0,n="16:9",t.ratio<1.77?a=r*t.scale.x/1.78/t.scale.y:r=a*t.scale.y*1.78/t.scale.x}s={mode:e,info:n}}return(s||i)&&(s||t.offset(function(t){r=t.width,a=t.height}),player.SetVideoArea(r*t.scale.x,a*t.scale.y)),s},reset:function(){this.inited=!1}},audio:{total:!1,inited:!1,init:function(){if(!this.inited){var t=player.GetAudioTracksCount()||0;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=0),player.SetAudioTrack(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},subtitles:{total:!1,inited:!1,init:function(){if(!this.inited){var t=player.GetSubtitleTracksCount()||0;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=-1),player.SetSubtitleTrack(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},visible:function(){return player.Visible()},toggle:function(t){t?player.Show():player.Hide()},offset:function(t){var e=player.Offset().split("|"),i={left:e[0]/this.scale.x,top:e[1]/this.scale.y,width:e[2]/this.scale.x,height:e[3]/this.scale.y};return t?t(i):i},resize:function(t,e){t&&(player.Resize((t.left||0)*this.scale.x,(t.top||0)*this.scale.y,(t.width||1280)*this.scale.x,(t.height||720)*this.scale.y),e&&(this.mode="fullscreen"==e?e:"preview"),this.adapt(),this.trigger("resize",[this.mode]))},cover:!1,adapt:function(){this.psize.set(!1,!0)}});return t},exit:function(){sandroid.Exit()}})),Platform.add(Proto.platform("columbustv",{scaling:!0,detect:function(){return navigator.userAgent.search(/smartup/i)>=0&&window.smartup},init:function(t){var e,i={toggle:function(t){return columbustv[(t?"show":"hide")+"Cursor"](),this.reset()},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)},fading:!1,fade:function(){return this.reset().fading=jQuery.timeout(this,5e3,function(){columbustv.isFullScreen()?this.hide():this.reset()}),this},reset:function(){return this.fading&&(clearTimeout(this.fading),this.fading=!1),this}},n=(0===(e=Storage.device.get("volume"))||e>0?columbustv.setVolume(e):e=columbustv.getVolume(),{muted:function(){return columbustv.isMute()},mute:function(){return columbustv.setMute(!0),this},unmute:function(){return columbustv.setMute(!1),this},get:function(){return e},move:function(t){return(e+=t)<0&&(e=0),e>100&&(e=100),columbustv.setVolume(e),this},save:function(){return Storage.device.set("volume",e),this}});jQuery(document).on("mousedown mousemove",function(){i.show().fade()}),jQuery.interval(!1,1e3,function(){Network.status(columbustv.isNetworkConnected())}),Helper.prompt("help",["columbustv","helper"],["columbustv","help"],function(){var t;jQuery(document).on("keydown",function(e){112==e.keyCode&&(t?t.close():t=Proto.alert(["columbustv","helper"],["columbustv","help"]),t.open())})}),columbustv.setTopWin(0),columbustv.setMute(!1),columbustv.onNativeKeyPress=function(t){var e;switch(t){case 187:case 107:case 189:case 109:OSD.info.unhold(Language.message(["audio","volume"])+": "+n.unmute().move(187==t||107==t?1:-1).save().get());break;case 77:n.muted()?OSD.info.unhold(Language.message(["audio","volume"])+": "+n.unmute().get()):(n.mute(),OSD.info.hold(Language.message(["audio","muted"])));break;case 122:columbustv.toggleFullScreen()?i.fade():i.show()}e&&Navi.trigger(e)},t&&t()},keyset:{up:38,down:40,left:37,right:39,enter:13,back:27,prech:8,pup:33,pdown:34,n0:[48,96],n1:[49,97],n2:[50,98],n3:[51,99],n4:[52,100],n5:[53,101],n6:[54,102],n7:[55,103],n8:[56,104],n9:[57,105]},player:function(){var t=Proto.player({supports:{psize:!0,audio:!0,subtitles:function(){return"subtitleStreamCount"in columbustv}},create:function(){return jQuery.create("div",!1,{style:"visibility: hidden; background: #000001; position: absolute;"})},prepare:function(){columbustv.setTransparency(!0),columbustv.setTransparentColor(1),columbustv.setScreenOnWhilePlaying(!0),columbustv.onPlayerStatusChanged=function(e){switch(e){case 1:t.tick(!1,"buffering");break;case 2:!1===t.duration&&(t.pos>0&&columbustv.setPosition(1e3*t.pos),t.trigger("duration",[t.duration=Math.ceil(columbustv.getDuration()/1e3)||0])),t.tick(!0);break;case 3:t.tick(!1),t.state("ended",[t.duration>t.pos?t.duration:t.pos]);break;case 4:t.tick(!1),t.trigger("error")}}},play:function(t,e){return this.stop(),!!(t&&(e>0&&(this.pos=e),columbustv.play(t)))&&(this.trigger("play",[t,e],"buffering"),this.plays=!0)},stop:function(){return!!this.plays&&(columbustv.stop(),this.trigger("stop",[this.pos],"stopped"),this.reset(),!0)},pause:function(t){return!!this.plays&&!!this.playing&&(t?(columbustv.pause(),this.paused=!0,this.state("paused")):(columbustv.resume(),this.paused=!1,this.state("playing")),this.paused)},seek:function(t){return!!(this.plays&&this.playing&&this.duration>0&&t>=0&&t<=this.duration&&columbustv.isSeekable())&&(columbustv.setPosition(1e3*t),this.trigger("seek",[this.pos=t]),!0)},audio:{total:!1,inited:!1,init:function(){if(!this.inited){var t=columbustv.audioStreamCount()||0;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=0),columbustv.setAudioStream(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},subtitles:{total:!1,inited:!1,init:function(){if(!this.inited){var t=columbustv.subtitleStreamCount()||0;t>0&&(this.total=t)}return this.inited=!0},count:function(){return this.total||0},set:function(t){var e=!1;return this.inited&&this.total>0&&(t>=this.total&&(t=-1),columbustv.setSubtitleStream(t)&&(e=t)),e},reset:function(){this.total=this.inited=!1}},adapt:function(){this.offset(function(t){columbustv.setVideoGeometry(t.width,t.height,t.left,t.top)})}});return t},exit:function(){columbustv.exit()}}));var b,a,App=(Module={run:function(_0x4b1535,_0x178798){(_0x314b40=_0x314b40||Config.get("modules"))&&(_0x4b1535=_0x4b1535||_0x12bea0||(_0x5715cf=_0x5715cf||Storage.device.get("module"))||_0x314b40[0])&&(-1==_0x314b40.indexOf(_0x4b1535)?_0x4b1535==_0x5715cf&&this.run(_0x314b40[0],_0x178798):_0x12bea0!=_0x4b1535&&(_0x4b1535==_0x5715cf||Storage.device.set("module",_0x5715cf=_0x4b1535))&&(_0x12bea0?Main.reload():jQuery.ajax({url:_0x4b1535+"/"+_0x4b1535.substring(_0x4b1535.lastIndexOf("/")+1)+".js",success:function(_0x15f725){if(_0x15f725)try{(_0x15f725=eval(_0x15f725)())&&!1!==_0x15f725.run(_0x178798)&&Ajaxify.assign({module:_0x12bea0=_0x4b1535})}catch(a){}},dataType:"text"})))},name:function(){return _0x12bea0},is:function(t){return t&&t==_0x12bea0}},Plugins={load:function(_0x415c0c){var _0xc15b39=!0,_0x464a83=Config.get("plugins");if(_0x464a83){for(var _0x49a48f in _0x464a83)if(jQuery.ajax({url:_0x464a83[_0x49a48f]+"/"+_0x464a83[_0x49a48f].substring(_0x464a83[_0x49a48f].lastIndexOf("/")+1)+".js",async:!1,success:function(_0x2d066d){if(_0x2d066d)try{eval(_0x2d066d)}catch(a){_0xc15b39=!1}},error:function(){_0xc15b39=!1},dataType:"text"}),!_0xc15b39)break}_0xc15b39&&_0x415c0c&&_0x415c0c()}},Body={toggle:function(t){return jQuery("#body").css({left:t?"":"-100%"}),this}},Sidebar={bind:function(){return jQuery("#body > .sidebar").on("key:mouse.sidebar",function(){jQuery(this).trigger("open")}),this},get:function(t){return jQuery("#body > "+(t?"#"+t:"")+".sidebar")},open:function(t,e){return this.get(t).trigger("open",e),this},close:function(t,e){return this.get(t).trigger("close",e),this},toggle:function(t,e){return this.get(e).each(function(){jQuery("#body")[t?"addClass":"removeClass"]("sidebar-"+jQuery(this).attr("id"))}),this},enable:function(t,e,i){return this.get(t).bind("open",e).bind("close",i).addClass("clickable"),this.toggle(!0,t)},disable:function(t){return this.close(t).get(t).unbind("open").unbind("close").removeClass("clickable"),this.toggle(!1,t)}},Preload={hide:function(){return jQuery("#preload").hide(),this},show:function(){return jQuery("#preload").show(),this}},Logo={show:function(){return jQuery("#logo").show(),this},hide:function(){return jQuery("#logo").hide(),this}},Header={set:function(t,e){var i="";return(e&&(i+='<div class="alt">'+e+"</div>"),t&&(i+='<div class="title">'+t+"</div>"),i)?(jQuery("#header").html(i),this):this.empty()},reset:function(){return jQuery("#header").empty(),this},toggle:function(t){return jQuery("#header")[t?"show":"hide"](),this}},Clock={init:function(){return this.refresh().loop()},timer:!1,loop:function(){return this.reset().timer=jQuery.interval(this,1e3,this.refresh),this},refresh:function(){return jQuery("#clock").html('<span class="date">'+Dating.format("%D, %d %M","l")+'</span><span class="time">'+Dating.format("%H:%i","l")+"</span>"),this},show:function(){return jQuery("#clock").show(),this},hide:function(){return jQuery("#clock").hide(),this},reset:function(){return this.timer&&(clearInterval(this.timer),this.timer=!1),this}},Menu=a={extend:function(t){return this.items=jQuery.extend(!0,{},this.items,t),this},add:function(){var t,e,i;if(arguments.length>1&&(t=arguments[0],3==arguments.length?(i=arguments[1],e=arguments[2]):e=arguments[1],t&&e)){if(t in this.items)this.items[t]=e;else if(i){var n={};for(var s in this.items)s==i&&(n[t]=e),n[s]=this.items[s];this.items=n}else{var r={};r[t]=e,this.extend(r)}}return this},remove:function(t,e){return t in this.items&&(e?this.items[t].sub&&delete this.items[t].sub[e]:delete this.items[t]),this},items:{settings:{label:["menu","settings"],enter:function(t){},sub:{langs:{label:["language","choose"],enter:function(){Language.choose()},enabled:function(){return Language.count()>1}},timezone:{label:["timezone","choose"],enter:function(){Timezone.choose()}},censor:{label:["censor","control"],enter:function(){Censor.confirm(function(){Censor.dialog()})}}}},device:{label:["menu","device"],enter:function(t){},sub:{menu:{label:["device","menu"],enter:function(){Platform.call("menu")},enabled:function(){return Platform.callable("menu")}},duid:{label:["device","duid"],enter:function(){var t=Proto.dialog({title:["device","duid"],legend:{back:{key:"back",label:["navigation","back"]}},body:function(){return'<div class="alert">'+Platform.get("duid")+"</div>"},on:function(){this.container.on("key:back.dialog",function(){t.close()})},off:function(){this.container.off(".dialog")}});t.open()}}}},auth:{label:["menu","auth"],enter:function(t){},sub:{signin:{label:["menu","signin"],enter:function(t){Signin.enter(function(){Main.reload()})},enabled:function(){return Signin.unsigned()}},signout:{label:["menu","signout"],enter:function(){Signin.exit()},enabled:function(){return Signin.signed()}}},enabled:function(){return Signin.enabled()}},restart:{label:["app","restart"],enter:function(){Main.reload()}}},open:function(){var t=Proto.menu({id:"menu",sidebar:"left",icognize:!0,paging:8,items:function(){var e={};return Config.get("modules",function(i){i&&i.map(function(i){e[i]={label:["modules",i],enter:function(){Module.run(i),t.close()},focused:Module.is(i)}})}),jQuery.extend(!0,e,a.items)},opened:!0});return this}},About={dialog:function(){Proto.alert(App.author.site(),["app","about"]).open()}},{skel:'<div id="viewport"><div id="body"><div id="left" class="sidebar">&bull;<br />&bull;<br />&bull;</div><div id="right" class="sidebar">&bull;<br />&bull;<br />&bull;</div><div id="center"><div id="header"></div><div id="logo"></div><div id="clock"></div><div id="scenes"></div><div id="legend"></div></div></div><div id="preload"><img src="resources/images/preload.gif" /></div><div id="overlay"></div><div id="osd"></div></div>',css:["resources/css/reset.css","resources/css/app.css","resources/css/custom.css"],meta:[{"http-equiv":"Content-Type",content:"text/html; charset=utf-8; supportspointer=true"}],base:function(){var t,e;if(document.currentScript)e=document.currentScript;else{var i=document.getElementsByTagName("script");e=i[i.length-1]}return!!(e.src&&(t=e.src.substring(0,e.src.lastIndexOf("/")+1))&&t.indexOf("://")>0)&&(jQuery.create("base","head",{href:t}),!0)},init:function(t){if(this.base()){Main.meta.set(this.meta),Main.css.load(this.css);try{document.body.innerHTML+=this.skel}catch(e){document.write(this.skel)}t&&t()}},run:function(t){Logo.hide(),Clock.init(),Scenes.hide(),Preload.show(),Plugins.load(function(){Module.run(t,function(){Scenes.show(),Logo.show(),Clock.show(),Preload.hide(),Timezone.helper(),Helper.init(),Notify.init(),Ping.init(),Sidebar.bind()})})},author:{site:function(){return""}}}),Signin=(b=!1,{forms:!1,enabled:function(t){return Auth.enabled()&&Config.enabled("signin")&&(!t||this.has(t))},has:function(t){return t&&this.forms&&t in this.forms&&this.forms[t]},setup:function(t){return t&&(this.forms=t),this.signed()||this.enter(),this},data:function(){return Storage.device.get("signin")||!1},stored:function(){return!!this.data()},signed:function(){return b||this.stored()},unsigned:function(){return!this.signed()},enter:function(t,e,i,n){var s=this;if(this.enabled("fields")){var r=!1,i=i||this.data()||{};for(var a in this.forms.fields)if(a in i)r=!0;else{r=!1;break}if(e&&(r||n)){var o,u,c=i.login,h=i.password,l=(o=Storage.device.get("duid"),u=function(){var t=function(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t)};return t()},o||((o=u())&&Storage.device.set("duid",o)?o:"unknown_duid"));console.log("Generated or retrieved duid:",l);var $=function(t){return t.slice(-12).toUpperCase()},d=function(t){for(var e=t.slice(-12),i=[],n=0;n<12;n+=2)i.push(e.substr(n,2));return i.join(":").toUpperCase()}(l);console.log("Generated MAC address for authmac:",d);var f={platform:Config.get("platform")||"unknown_platform",duid:l,lid:Storage.device.get("lid")||"unknown_lid",signin:{login:c,password:h},aid:Config.get("aid")||"unknown_aid"};console.log("Final authData:",f);var x=function(t,e,i,n){return"samsungapps"===t&&"samsungapps"===e||"lg"===t&&"lg"===e?"http://91.201.144.145/access.php":"https://bill.columbus.te.ua/mwauth_aid.cgi"},p=function(e,i,n,r){console.log("Showing device removal menu with devices:",e,"and names:",i);for(var a={},o=0;o<e.length;o++){var u=i[o]?i[o]:"Невідомий пристрій";a[e[o]]={label:[u+" (ID: "+e[o]+")"],enter:function(e){return function(){console.log("Selected device to remove:",e),l.close(),Overlay.hide(),g(t,r,e)}}(e[o])}}var l=Proto.menu({title:["auth","Перевищено ліміт пристроїв! Виберіть пристрій для видалення","Перевищено ліміт пристроїв"],items:a,back:function(){console.log("Device removal menu closed via back"),l.close(),Overlay.hide()}});l&&l.open?(l.open(),console.log("Device removal menu opened")):(console.error("Failed to create or open removal menu"),s.showErrorDialog("Помилка відображення списку пристроїв",t,c,h))},g=function(e,i,n){var r,a=x(c,h,i.duid,n);if("samsungapps"===c&&"samsungapps"===h)r={};else if(n){var o=$(n);console.log("Raw device ID for removal:",o),r={action:"checkauth",androidid:d,password:i.signin.login,isstb:"2",version:"1.54",devname:"TVAPP",mactoremove:n}}else r={action:"checkauth",androidid:d,password:i.signin.login,isstb:"2",version:"1.54",devname:"TVAPP"};var u="";for(var l in r)r.hasOwnProperty(l)&&(u+=(u?"&":"")+encodeURIComponent(l)+"="+encodeURIComponent(r[l]));function f(t,e,i,n,s,r,a,o,u,c){void 0===u&&(u=5),void 0===c&&(c=0),jQuery.ajax({url:e,method:"POST",data:i,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",authmac:n},processData:!1,timeout:3e3,success:function(e){if(console.log("AJAX data sent:",i),console.log("Server response:",e),!Array.isArray(e)||!e.length){t.showErrorDialog("Невірний формат відповіді",a,s,r);return}var n=e[0];"0"===n||0===n?Auth.request(function(e){if(e.valid){b=!0,Storage.device.set("signin",{login:s,password:r}),t.currentForm&&(t.currentForm.close(),delete t.currentForm);var i=Proto.alert("Loading...",["auth",""],{back:!1});i.open(),setTimeout(function(){i.close(),jQuery(".dialog").remove(),Overlay.hide(),a&&a()},1500)}else t.showErrorDialog("Помилка валідації",a,s,r)},o):"1"===n?t.showErrorDialog("Помилка завантаження списка каналів. Перевірте інтернет підключення. Помилка 1",a,s,r):"3"===n?"1"===e[1]?t.showErrorDialog("Ваш IP змінився, повторіть спробу. Помилка 3,1",a,s,r):t.showErrorDialog("Код доступу введено неправильно, повторіть спробу. Помилка 3",a,s,r):"4"===n?"1"===e[1]?t.showErrorDialog("Можливо ваша IP змінилась або код доступу введено неправильно. Помилка 4,1",a,s,r):t.showErrorDialog("Код доступу введено неправильно, повторіть спробу. Помилка 4",a,s,r):"40"===n?t.showErrorDialog("Перезавантажте додаток. Помилка 40",a,s,r):"5"===n?e[1]&&e[2]&&Array.isArray(e[1])&&Array.isArray(e[2])&&e[1].length>0?(console.log("Device limit exceeded, showing removal menu"),p(e[1],e[2],a,o)):(console.error("Invalid device data for removal:",e),t.showErrorDialog("Перевищено ліміт пристроїв. Дані про пристрої відсутні або некоректні.",a,s,r)):t.showErrorDialog("Невідома помилка: "+n,a,s,r)},error:function(h,l,$){"timeout"===l&&c<u?(console.log("Спроба "+(c+1)+" не вдалася через таймаут. Повторюємо..."),f(t,e,i,n,s,r,a,o,u,c+1)):(console.error("Помилка AJAX:",$),t.showErrorDialog("Помилка з’єднання: "+("timeout"===l?"Таймаут після "+u+" спроб":$),a,s,r))}})}console.log("Manually serialized postData:",u),f(s,a,u,d,c,h,t,i,5,0)};g(t,f)}else s.showLoginForm(t,i)}},showErrorDialog:function(t,e,i,n){var s=this,r=Proto.alert(t,["auth","error"],{back:function(){r.close(),Overlay.hide(),s.showLoginForm(e,{login:i,password:n})}});r.open()},showLoginForm:function(t,e){var i=this,n=Proto.form({title:["auth","signin"],back:function(){var t=Proto.menu({title:["auth","confirm exit"],items:{yes:{label:["auth","Yes"],legend:{enter:{key:"enter",label:["navigation","enter"]},ud:{key:"down",icon:"ud",label:["navigation","ud"]},back:{key:"back",label:["navigation","back"]}},enter:function(){t.close(),n.close(),Overlay.hide(),Storage.device.remove("signin"),b=!1,Helper.reset(),Main.exit()}},no:{label:["auth","No"],enter:function(){t.close()}}},back:function(){t.close()}});t.open()},fields:function(){return Proto.fields({login:{label:["login"],type:"text",layout:"eng",value:e.login||""},password:{label:["password"],type:"password",protect:"secure",layout:"eng",value:e.password||""}},["auth"],e)},actions:{signin:{title:["auth","signin"],submit:!0,callback:function(e){i.enter(t,!0,e,!0),n.close(),Overlay.hide()}},signup:{title:["auth","signup"],callback:function(){n.close(),Overlay.hide(),Signup.dialog(t)},enabled:function(){return Signup.enabled()}}}});i.currentForm=n,n.open()},exit:function(){b&&(Storage.device.remove("signin"),b=!1,Helper.reset(),Main.reload())}});Main.init(),Platform.detect(function(){Main.bind(),Env.bind(),App.init(function(){History.bind(),Ajaxify.init(),Scaling.init(),Main.ready(function(){Config.load(function(){Storage.device.init(),Platform.init(function(){Keyset.init(function(){Keyset.bind(),Navi.bind(),Language.init(function(){Keyboard.init(function(){Notify.bind(),Auth.init(function(){Storage.server.init(function(){Timezone.init(),Dating.init(function(){Dating.bind(),App.run()})})})})})})})})})})})}(jQuery);
